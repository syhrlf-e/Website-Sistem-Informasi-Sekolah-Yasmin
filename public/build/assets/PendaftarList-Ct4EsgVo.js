import{r as g,c as m,o as K,b as O,i as d,k as l,e as n,F as _,l as e,f as X,u as p,t as o,B as j,O as Y,W as B,C as I,m as u,g as q,j as C,T as J,P as Q}from"./vendor-0BLfaBTW.js";import{a as W,L as Z,d as ee}from"./app-F21Gw_vX.js";import{C as te,l as ae,m as se,S as re,G as oe,X as V,a3 as ne,P as ie,c as le,ao as de,s as pe,h as ge}from"./ui-BH4Jb6j-.js";const ue={class:"space-y-6"},ce={key:0,class:"flex flex-col items-center justify-center min-h-[400px]"},xe={class:"grid grid-cols-1 sm:grid-cols-3 gap-6"},fe={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow duration-300"},ke={class:"flex items-center justify-between mb-4"},ye={class:"w-12 h-12 rounded-xl bg-orange-50 dark:bg-orange-900/20 flex items-center justify-center"},me={class:"text-3xl font-bold text-gray-900 dark:text-white mb-1 font-poppins"},be={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow duration-300"},he={class:"flex items-center justify-between mb-4"},ve={class:"w-12 h-12 rounded-xl bg-green-50 dark:bg-green-900/20 flex items-center justify-center"},we={class:"text-3xl font-bold text-gray-900 dark:text-white mb-1 font-poppins"},_e={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow duration-300"},je={class:"flex items-center justify-between mb-4"},Ce={class:"w-12 h-12 rounded-xl bg-red-50 dark:bg-red-900/20 flex items-center justify-center"},Pe={class:"text-3xl font-bold text-gray-900 dark:text-white mb-1 font-poppins"},Te={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700"},Ae={class:"flex flex-col md:flex-row gap-4"},Se={class:"flex-1 relative"},Ee=["value"],Le={class:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden"},De={class:"overflow-x-auto"},Be={class:"w-full"},Ie={class:"divide-y divide-gray-200 dark:divide-gray-700"},Ve={class:"px-6 py-4"},$e={class:"flex items-center gap-3"},Ne={class:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold text-sm"},Ue={class:"font-semibold text-gray-900 dark:text-white font-poppins"},Me={class:"text-xs text-gray-500 dark:text-gray-400"},ze={class:"px-6 py-4 text-sm text-gray-900 dark:text-white font-poppins"},Fe={class:"px-6 py-4 text-sm text-gray-900 dark:text-white font-poppins"},Ge={class:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400 font-poppins"},Re={class:"px-6 py-4"},He={key:0,class:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400 font-poppins"},Ke={key:1,class:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 font-poppins"},Oe={key:2,class:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 font-poppins"},Xe={class:"px-6 py-4"},Ye={class:"flex items-center justify-center"},qe=["onClick"],Je={key:0,class:"fixed inset-0 z-[9999] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4"},Qe={class:"bg-white dark:bg-gray-800 rounded-2xl max-w-lg w-full p-6 border border-gray-200 dark:border-gray-700"},We={class:"flex items-center justify-between mb-6"},Ze={key:0,class:"space-y-4"},et={class:"flex items-center gap-4 pb-4 border-b border-gray-200 dark:border-gray-700"},tt={class:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold text-2xl"},at={class:"text-xl font-bold text-gray-900 dark:text-white font-poppins"},st={class:"text-sm text-gray-600 dark:text-gray-400"},rt={class:"space-y-3"},ot={class:"flex items-center gap-3"},nt={class:"font-semibold text-gray-900 dark:text-white font-poppins"},it={class:"flex items-center gap-3"},lt={class:"font-semibold text-gray-900 dark:text-white font-poppins"},dt={class:"flex items-center gap-3"},pt={class:"font-semibold text-gray-900 dark:text-white font-poppins"},gt={class:"flex items-start gap-3"},ut={class:"min-w-0 flex-1"},ct={class:"text-sm text-gray-900 dark:text-white font-poppins break-words whitespace-pre-wrap"},xt={class:"flex items-center gap-3"},ft={class:"font-semibold text-gray-900 dark:text-white font-poppins"},kt={key:0,class:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"},yt={__name:"PendaftarList",setup(mt){const{confirm:P,showSuccess:T,showError:A,showPrompt:$}=ee(),b=g(""),k=g(""),y=g("pending"),c=g(!1),i=g(null),x=g([]),S=g([]),E=g(!0),L=g(!0),f=async()=>{try{E.value=!0;const s=sessionStorage.getItem("admin_token"),a=await(await fetch("/api/yasmin-panel/ekstrakurikuler/registrations",{headers:{Authorization:`Bearer ${s}`,Accept:"application/json"}})).json();a.success&&(x.value=a.data.map(r=>{var w;return{id:r.id,nama:r.nama_lengkap,kelas:r.kelas,email:r.email,noHp:r.no_whatsapp||"-",ekskul:((w=r.ekstrakurikuler)==null?void 0:w.nama)||"N/A",alasan:r.alasan_bergabung||"-",tanggal:new Date(r.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),status:r.status}}))}catch(s){console.error("Error fetching registrations:",s)}finally{E.value=!1,L.value=!1}},N=async()=>{try{const s=sessionStorage.getItem("admin_token"),a=await(await fetch("/api/yasmin-panel/ekstrakurikuler",{headers:{Authorization:`Bearer ${s}`,Accept:"application/json"}})).json();a.success&&Array.isArray(a.data)&&(S.value=a.data.map(r=>({id:r.id,nama:r.nama})))}catch(s){console.error("Error fetching ekskul list:",s)}},D=()=>{document.hidden||f()};let h=null;const U=m(()=>x.value.filter(s=>{const t=s.nama.toLowerCase().includes(b.value.toLowerCase()),a=k.value===""||s.ekskul===k.value,r=y.value===""||s.status===y.value;return t&&a&&r})),M=m(()=>x.value.filter(s=>s.status==="pending").length),z=m(()=>x.value.filter(s=>s.status==="approved").length),F=m(()=>x.value.filter(s=>s.status==="rejected").length),G=async s=>{if((await P("Terima Pendaftar?","Pendaftar akan disetujui untuk bergabung","Ya, Terima!")).isConfirmed)try{const a=sessionStorage.getItem("admin_token");if(!(await fetch(`/api/yasmin-panel/ekstrakurikuler/registrations/${s}/approve`,{method:"PUT",headers:{Authorization:`Bearer ${a}`,Accept:"application/json"}})).ok)throw new Error("Failed to approve");await T("Berhasil!","Pendaftar berhasil diterima"),c.value&&v(),await f()}catch(a){console.error("Error approving:",a),await A("Gagal!","Gagal menerima pendaftar")}},R=async s=>{if(!(await P("Tolak Pendaftar?","Pendaftar akan ditolak","Ya, Tolak!")).isConfirmed)return;const a=await $("Alasan Penolakan",{inputLabel:"Masukkan alasan penolakan (minimal 10 karakter)",inputPlaceholder:"Contoh: Tidak memenuhi kriteria usia minimum",confirmText:"Tolak",cancelText:"Batal",inputValidator:r=>r?r.length<10?"Alasan penolakan minimal 10 karakter!":r.length>1e3?"Alasan penolakan maksimal 1000 karakter!":null:"Alasan penolakan harus diisi!"});if(!(!a.isConfirmed||!a.value))try{const r=sessionStorage.getItem("admin_token");if(!(await fetch(`/api/yasmin-panel/ekstrakurikuler/registrations/${s}/reject`,{method:"PUT",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({admin_notes:a.value})})).ok)throw new Error("Failed to reject");await T("Berhasil!","Pendaftar berhasil ditolak"),c.value&&v(),await f()}catch(r){console.error("Error rejecting:",r),await A("Gagal!","Gagal menolak pendaftar")}},H=s=>{i.value=s,c.value=!0},v=()=>{c.value=!1,i.value=null};return K(()=>{N(),f(),document.addEventListener("visibilitychange",D),h=setInterval(f,3e3)}),O(()=>{document.removeEventListener("visibilitychange",D),h&&clearInterval(h)}),(s,t)=>(l(),d("div",ue,[L.value?(l(),d("div",ce,[n(Z,{size:"lg",color:"blue"})])):(l(),d(_,{key:1},[t[26]||(t[26]=e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"}," Pendaftar Ekstrakurikuler "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},"Kelola pendaftaran siswa Ekstrakurikuler")])],-1)),e("div",xe,[e("div",fe,[e("div",ke,[e("div",ye,[n(p(te),{class:"w-6 h-6 text-orange-600 dark:text-orange-400"})]),t[5]||(t[5]=e("span",{class:"text-xs font-medium text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-3 py-1 rounded-full"},"Menunggu",-1))]),e("h3",me,o(M.value),1),t[6]||(t[6]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Perlu Persetujuan",-1))]),e("div",be,[e("div",he,[e("div",ve,[n(p(ae),{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),t[7]||(t[7]=e("span",{class:"text-xs font-medium text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 px-3 py-1 rounded-full"},"Disetujui",-1))]),e("h3",we,o(z.value),1),t[8]||(t[8]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Pendaftar Diterima",-1))]),e("div",_e,[e("div",je,[e("div",Ce,[n(p(se),{class:"w-6 h-6 text-red-600 dark:text-red-400"})]),t[9]||(t[9]=e("span",{class:"text-xs font-medium text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-3 py-1 rounded-full"},"Ditolak",-1))]),e("h3",Pe,o(F.value),1),t[10]||(t[10]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Pendaftar Ditolak",-1))])]),e("div",Te,[e("div",Ae,[e("div",Se,[n(p(re),{class:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"}),j(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>b.value=a),type:"text",placeholder:"Cari nama siswa...",class:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 text-gray-900 dark:text-white font-poppins"},null,512),[[Y,b.value]])]),j(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>k.value=a),class:"px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 text-gray-900 dark:text-white font-poppins"},[t[11]||(t[11]=e("option",{value:""},"Semua Ekskul",-1)),(l(!0),d(_,null,I(S.value,a=>(l(),d("option",{key:a.id,value:a.nama},o(a.nama),9,Ee))),128))],512),[[B,k.value]]),j(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>y.value=a),class:"px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 text-gray-900 dark:text-white font-poppins"},[...t[12]||(t[12]=[e("option",{value:""},"Semua Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"rejected"},"Rejected",-1)])],512),[[B,y.value]])])]),e("div",Le,[e("div",De,[e("table",Be,[t[17]||(t[17]=e("thead",{class:"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider font-poppins"}," Nama Siswa "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider font-poppins"}," Kelas "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider font-poppins"}," Ekskul "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider font-poppins"}," Tanggal "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider font-poppins"}," Status "),e("th",{class:"px-6 py-4 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider font-poppins"}," Action ")])],-1)),e("tbody",Ie,[(l(!0),d(_,null,I(U.value,a=>(l(),d("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150"},[e("td",Ve,[e("div",$e,[e("div",Ne,o(a.nama[0].toUpperCase()),1),e("div",null,[e("p",Ue,o(a.nama),1),e("p",Me,o(a.email),1)])])]),e("td",ze,o(a.kelas),1),e("td",Fe,o(a.ekskul),1),e("td",Ge,o(a.tanggal),1),e("td",Re,[a.status==="pending"?(l(),d("span",He,[...t[13]||(t[13]=[e("div",{class:"w-2 h-2 rounded-full bg-orange-500"},null,-1),u(" Pending ",-1)])])):a.status==="approved"?(l(),d("span",Ke,[...t[14]||(t[14]=[e("div",{class:"w-2 h-2 rounded-full bg-green-500"},null,-1),u(" Approved ",-1)])])):(l(),d("span",Oe,[...t[15]||(t[15]=[e("div",{class:"w-2 h-2 rounded-full bg-red-500"},null,-1),u(" Rejected ",-1)])]))]),e("td",Xe,[e("div",Ye,[e("button",{onClick:r=>H(a),class:"flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors duration-200 font-medium font-poppins text-sm"},[n(p(oe),{class:"w-4 h-4"}),t[16]||(t[16]=u(" Lihat Detail ",-1))],8,qe)])])]))),128))])])])]),(l(),X(Q,{to:"body"},[n(J,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:q(()=>[c.value?(l(),d("div",Je,[e("div",Qe,[e("div",We,[t[18]||(t[18]=e("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"}," Detail Pendaftar ",-1)),e("button",{onClick:v,class:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},[n(p(V),{class:"w-5 h-5 text-gray-500"})])]),i.value?(l(),d("div",Ze,[e("div",et,[e("div",tt,o(i.value.nama[0].toUpperCase()),1),e("div",null,[e("p",at,o(i.value.nama),1),e("p",st,o(i.value.kelas),1)])]),e("div",rt,[e("div",ot,[n(p(ne),{class:"w-5 h-5 text-gray-400"}),e("div",null,[t[19]||(t[19]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Ekskul",-1)),e("p",nt,o(i.value.ekskul),1)])]),e("div",it,[n(p(ie),{class:"w-5 h-5 text-gray-400"}),e("div",null,[t[20]||(t[20]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"No. HP",-1)),e("p",lt,o(i.value.noHp),1)])]),e("div",dt,[n(p(le),{class:"w-5 h-5 text-gray-400"}),e("div",null,[t[21]||(t[21]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Email",-1)),e("p",pt,o(i.value.email),1)])]),e("div",gt,[n(p(de),{class:"w-5 h-5 text-gray-400 mt-1 flex-shrink-0"}),e("div",ut,[t[22]||(t[22]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"Alasan Bergabung",-1)),e("p",ct,o(i.value.alasan),1)])]),e("div",xt,[n(p(pe),{class:"w-5 h-5 text-gray-400"}),e("div",null,[t[23]||(t[23]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Tanggal Daftar",-1)),e("p",ft,o(i.value.tanggal),1)])])]),i.value.status==="pending"?(l(),d("div",kt,[e("button",{onClick:t[3]||(t[3]=a=>G(i.value.id)),class:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-semibold transition-colors duration-200 font-poppins"},[n(p(ge),{class:"w-5 h-5"}),t[24]||(t[24]=u(" Terima ",-1))]),e("button",{onClick:t[4]||(t[4]=a=>R(i.value.id)),class:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold transition-colors duration-200 font-poppins"},[n(p(V),{class:"w-5 h-5"}),t[25]||(t[25]=u(" Tolak ",-1))])])):C("",!0)])):C("",!0)])])):C("",!0)]),_:1})]))],64))]))}},wt=W(yt,[["__scopeId","data-v-d654d1b9"]]);export{wt as default};
