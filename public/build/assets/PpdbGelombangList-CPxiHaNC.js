import{r as u,a as j,o as M,i as d,k as n,l as t,f as P,e as w,m as G,u as C,F as S,C as F,t as o,A as D,j as B,U as N,B as i,O as g,X as A,P as I}from"./vendor-0BLfaBTW.js";import{a as L,c as b,d as E}from"./app-F21Gw_vX.js";import{ab as O,ar as W}from"./ui-BH4Jb6j-.js";const H={class:"space-y-6"},K={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Y={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},z={key:0,class:"flex items-center justify-center py-12"},X={key:1,class:"text-center py-12"},J={key:2,class:"divide-y divide-gray-200 dark:divide-gray-700"},Q={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},R={class:"flex-1"},Z={class:"flex items-center gap-3"},ee={class:"font-semibold text-gray-900 dark:text-white"},te={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},ae={class:"flex items-center gap-4 mt-2 text-sm"},re={class:"text-gray-600 dark:text-gray-300"},se={key:0,class:"text-gray-500"},le={class:"flex items-center gap-2"},oe=["onClick"],ne=["onClick"],de=["onClick","disabled"],ie={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4"},ge={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-lg w-full shadow-xl max-h-[90vh] overflow-y-auto"},ue={class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},be={class:"grid grid-cols-2 gap-4"},me={class:"grid grid-cols-2 gap-4"},pe={class:"flex items-center gap-2"},ce={class:"flex gap-3 pt-2"},ye=["disabled"],xe={__name:"PpdbGelombangList",setup(fe){const{showSuccess:m,showError:f,confirm:q}=E(),v=u(!0),k=u([]),p=u(!1),c=u(null),y=u(!1),s=j({name:"",academic_year:"",start_date:"",end_date:"",quota:null,fee:null,description:"",is_active:!0}),x=async()=>{try{const r=await b.get("/yasmin-panel/ppdb/waves");r.data.success&&(k.value=r.data.data.data)}catch(r){console.error("Failed to fetch waves:",r)}finally{v.value=!1}},_=(r=null)=>{if(c.value=r,r){const e=a=>a?new Date(a).toISOString().split("T")[0]:"";Object.assign(s,{name:r.name,academic_year:r.academic_year,start_date:e(r.start_date),end_date:e(r.end_date),quota:r.quota,fee:r.fee,description:r.description||"",is_active:r.is_active})}else Object.assign(s,{name:"",academic_year:new Date().getFullYear()+"/"+(new Date().getFullYear()+1),start_date:"",end_date:"",quota:null,fee:null,description:"",is_active:!0});p.value=!0},V=async()=>{var r,e;y.value=!0;try{c.value?(await b.put(`/yasmin-panel/ppdb/waves/${c.value.id}`,s),m("Berhasil!","Gelombang berhasil diupdate")):(await b.post("/yasmin-panel/ppdb/waves",s),m("Berhasil!","Gelombang berhasil ditambahkan")),p.value=!1,x()}catch(a){f("Gagal!",((e=(r=a.response)==null?void 0:r.data)==null?void 0:e.message)||"Gagal menyimpan gelombang")}finally{y.value=!1}},T=async r=>{var e,a;try{const l=await b.put(`/yasmin-panel/ppdb/waves/${r.id}/toggle`);l.data.success&&(m("Berhasil!",l.data.data.is_active?"Gelombang diaktifkan":"Gelombang dinonaktifkan"),x())}catch(l){f("Gagal!",((a=(e=l.response)==null?void 0:e.data)==null?void 0:a.message)||"Gagal mengubah status gelombang")}},U=async r=>{var a,l;if((await q("Hapus Gelombang?",`Gelombang "${r.name}" akan dihapus permanen`,"Ya, Hapus")).isConfirmed)try{await b.delete(`/yasmin-panel/ppdb/waves/${r.id}`),m("Berhasil!","Gelombang berhasil dihapus"),x()}catch($){f("Gagal!",((l=(a=$.response)==null?void 0:a.data)==null?void 0:l.message)||"Gagal menghapus gelombang")}},h=r=>r?new Date(r).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"-";return M(()=>{x()}),(r,e)=>(n(),d("div",H,[t("div",K,[e[11]||(e[11]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"},"Gelombang Pendaftaran"),t("p",{class:"text-gray-500 dark:text-gray-400 text-sm"},"Kelola periode pendaftaran PPDB")],-1)),t("button",{onClick:e[0]||(e[0]=a=>_()),class:"inline-flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium transition-colors"},[w(C(O),{class:"w-5 h-5"}),e[10]||(e[10]=G(" Tambah Gelombang ",-1))])]),t("div",Y,[v.value?(n(),d("div",z,[...e[12]||(e[12]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):k.value.length?(n(),d("div",J,[(n(!0),d(S,null,F(k.value,a=>(n(),d("div",{key:a.id,class:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},[t("div",Q,[t("div",R,[t("div",Z,[t("h3",ee,o(a.name),1),t("span",{class:D([a.is_open?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400","px-2 py-0.5 rounded-full text-xs font-medium"])},o(a.is_open?"Dibuka":"Ditutup"),3)]),t("p",te,o(a.academic_year)+" â€¢ "+o(h(a.start_date))+" - "+o(h(a.end_date)),1),t("div",ae,[t("span",re,[t("strong",null,o(a.registrations_count),1),e[14]||(e[14]=G(" pendaftar ",-1))]),a.quota?(n(),d("span",se," Kuota: "+o(a.available_slots)+"/"+o(a.quota),1)):B("",!0)])]),t("div",le,[t("button",{onClick:l=>T(a),class:D([a.is_active?"bg-yellow-100 text-yellow-700 hover:bg-yellow-200":"bg-green-100 text-green-700 hover:bg-green-200","px-3 py-1.5 rounded-lg text-sm font-medium transition-colors"])},o(a.is_active?"Nonaktifkan":"Aktifkan"),11,oe),t("button",{onClick:l=>_(a),class:"px-3 py-1.5 bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-lg text-sm font-medium transition-colors"}," Edit ",8,ne),t("button",{onClick:l=>U(a),disabled:a.registrations_count>0,class:"px-3 py-1.5 bg-red-100 text-red-700 hover:bg-red-200 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Hapus ",8,de)])])]))),128))])):(n(),d("div",X,[w(C(W),{class:"w-12 h-12 mx-auto text-gray-400 mb-3"}),e[13]||(e[13]=t("p",{class:"text-gray-500 dark:text-gray-400"},"Belum ada gelombang pendaftaran",-1))]))]),(n(),P(I,{to:"body"},[p.value?(n(),d("div",ie,[t("div",ge,[t("h3",ue,o(c.value?"Edit Gelombang":"Tambah Gelombang"),1),t("form",{onSubmit:N(V,["prevent"]),class:"space-y-4"},[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Nama Gelombang",-1)),i(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>s.name=a),type:"text",required:"",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Gelombang 1"},null,512),[[g,s.name]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tahun Ajaran",-1)),i(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>s.academic_year=a),type:"text",required:"",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"2025/2026"},null,512),[[g,s.academic_year]])]),t("div",be,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tanggal Mulai",-1)),i(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>s.start_date=a),type:"date",required:"",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"},null,512),[[g,s.start_date]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tanggal Selesai",-1)),i(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>s.end_date=a),type:"date",required:"",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"},null,512),[[g,s.end_date]])])]),t("div",me,[t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Kuota (opsional)",-1)),i(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>s.quota=a),type:"number",min:"1",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"100"},null,512),[[g,s.quota]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Biaya (opsional)",-1)),i(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>s.fee=a),type:"number",min:"0",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"500000"},null,512),[[g,s.fee]])])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Deskripsi",-1)),i(t("textarea",{"onUpdate:modelValue":e[7]||(e[7]=a=>s.description=a),rows:"2",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Info tambahan..."},null,512),[[g,s.description]])]),t("div",pe,[i(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>s.is_active=a),type:"checkbox",id:"is_active",class:"rounded"},null,512),[[A,s.is_active]]),e[22]||(e[22]=t("label",{for:"is_active",class:"text-sm text-gray-700 dark:text-gray-300"},"Aktif",-1))]),t("div",ce,[t("button",{type:"button",onClick:e[9]||(e[9]=a=>p.value=!1),class:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-medium"}," Batal "),t("button",{type:"submit",disabled:y.value,class:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium disabled:opacity-50"},o(y.value?"Menyimpan...":"Simpan"),9,ye)])],32)])])):B("",!0)]))]))}},he=L(xe,[["__scopeId","data-v-b64bfd53"]]);export{he as default};
