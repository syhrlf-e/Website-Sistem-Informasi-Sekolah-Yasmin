import{a as L,c as y,d as P}from"./app-F21Gw_vX.js";import{aq as A}from"./ui-BH4Jb6j-.js";import{r as i,o as B,s as F,i as r,k as o,l as e,F as v,C as _,A as c,m as w,j as b,t as l,e as C,u as V,g as E}from"./vendor-0BLfaBTW.js";const G={class:"space-y-6"},I={class:"flex gap-2 flex-wrap"},K=["onClick"],Y={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},q={key:0,class:"flex items-center justify-center py-12"},z={key:1,class:"text-center py-12"},J={key:2,class:"overflow-x-auto"},M={class:"w-full"},R={class:"divide-y divide-gray-200 dark:divide-gray-700"},U={class:"px-4 py-3 font-mono text-sm text-blue-600"},X={class:"px-4 py-3 font-medium text-gray-900 dark:text-white"},H={class:"px-4 py-3 text-sm text-gray-600 dark:text-gray-300"},O={class:"px-4 py-3"},Q={class:"px-4 py-3"},W={class:"px-4 py-3"},Z={class:"flex items-center justify-center gap-2"},ee=["onClick"],te=["onClick"],ae={__name:"PpdbSeleksiList",setup(se){const{showSuccess:j,showError:S,confirm:$}=P(),u=i(!0),p=i([]),d=i("selection"),x=i({}),N=[{value:"selection",label:"Tahap Seleksi"},{value:"accepted",label:"Diterima"},{value:"rejected",label:"Ditolak"}],g=async()=>{u.value=!0;try{const a=await y.get(`/yasmin-panel/ppdb/registrations?status=${d.value}&per_page=50`);a.data.success&&(p.value=a.data.data.data)}catch(a){console.error("Failed to fetch:",a)}finally{u.value=!1}},m=async()=>{try{const a=await y.get("/yasmin-panel/ppdb/dashboard");a.data.success&&(x.value=a.data.data.by_status)}catch(a){console.error("Failed to fetch counts:",a)}},f=async(a,s)=>{var n,h;if((await $("Konfirmasi",`Yakin ingin ${s==="accepted"?"menerima":"menolak"} pendaftar ini?`,"Ya, Lanjutkan")).isConfirmed)try{await y.put(`/yasmin-panel/ppdb/registrations/${a}/status`,{status:s}),j("Berhasil!","Status berhasil diupdate"),g(),m()}catch(D){S("Gagal!",((h=(n=D.response)==null?void 0:n.data)==null?void 0:h.message)||"Gagal update status")}},T=a=>({selection:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",accepted:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",rejected:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"})[a]||"bg-gray-100 text-gray-800";return B(()=>{g(),m()}),(a,s)=>{const k=F("router-link");return o(),r("div",G,[s[4]||(s[4]=e("div",{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},[e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"},"Seleksi Pendaftar"),e("p",{class:"text-gray-500 dark:text-gray-400 text-sm"},"Kelola proses seleksi calon siswa")])],-1)),e("div",I,[(o(),r(v,null,_(N,t=>e("button",{key:t.value,onClick:n=>{d.value=t.value,g()},class:c([d.value===t.value?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700","px-4 py-2 rounded-xl font-medium text-sm border border-gray-200 dark:border-gray-700 transition-colors"])},[w(l(t.label)+" ",1),x.value[t.value]?(o(),r("span",{key:0,class:c(["ml-2 px-2 py-0.5 rounded-full text-xs",d.value===t.value?"bg-white/20":"bg-gray-100 dark:bg-gray-700"])},l(x.value[t.value]),3)):b("",!0)],10,K)),64))]),e("div",Y,[u.value?(o(),r("div",q,[...s[0]||(s[0]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):p.value.length?(o(),r("div",J,[e("table",M,[s[3]||(s[3]=e("thead",{class:"bg-gray-50 dark:bg-gray-700/50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase"},"No. Registrasi"),e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase"},"Nama"),e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase"},"Asal Sekolah"),e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase"},"Jurusan"),e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase"},"Status"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase"},"Aksi")])],-1)),e("tbody",R,[(o(!0),r(v,null,_(p.value,t=>(o(),r("tr",{key:t.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[e("td",U,l(t.registration_number),1),e("td",X,l(t.nama_lengkap),1),e("td",H,l(t.asal_sekolah),1),e("td",O,[e("span",{class:c([t.jurusan_pilihan==="IPA"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800","px-2 py-1 rounded-lg text-xs font-medium"])},l(t.jurusan_pilihan),3)]),e("td",Q,[e("span",{class:c([T(t.status),"px-3 py-1 rounded-full text-xs font-medium"])},l(t.status_label),3)]),e("td",W,[e("div",Z,[t.status==="selection"?(o(),r("button",{key:0,onClick:n=>f(t.id,"accepted"),class:"px-3 py-1.5 bg-green-100 hover:bg-green-200 text-green-700 rounded-lg text-sm font-medium"}," Terima ",8,ee)):b("",!0),t.status==="selection"?(o(),r("button",{key:1,onClick:n=>f(t.id,"rejected"),class:"px-3 py-1.5 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg text-sm font-medium"}," Tolak ",8,te)):b("",!0),C(k,{to:`/yasmin-panel/ppdb/pendaftar/${t.id}`,class:"px-3 py-1.5 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg text-sm font-medium"},{default:E(()=>[...s[2]||(s[2]=[w(" Detail ",-1)])]),_:1},8,["to"])])])]))),128))])])])):(o(),r("div",z,[C(V(A),{class:"w-12 h-12 mx-auto text-gray-400 mb-3"}),s[1]||(s[1]=e("p",{class:"text-gray-500 dark:text-gray-400"},"Tidak ada data",-1))]))])])}}},ne=L(ae,[["__scopeId","data-v-55b85554"]]);export{ne as default};
