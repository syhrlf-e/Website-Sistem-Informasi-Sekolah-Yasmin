import{a as D,c as w,L as E,d as G}from"./app-F21Gw_vX.js";import{ab as T,f as N,ad as z,ac as V,X as q}from"./ui-BH4Jb6j-.js";import{i as d,k as r,l as e,j as M,e as g,m as $,u as h,F as H,C as K,t as y,A as O,r as f,w as F,f as L,g as J,U as C,B as W,O as X,T as Q,P as R,o as Y,K as Z}from"./vendor-0BLfaBTW.js";const ee={class:"flex items-center justify-between"},te={__name:"DokumenListHeader",props:{hasDocuments:{type:Boolean,default:!1}},emits:["upload"],setup(n){return(m,t)=>(r(),d("div",ee,[t[2]||(t[2]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"},"Dokumen PPDB"),e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},"Kelola dokumen informasi PPDB")],-1)),n.hasDocuments?(r(),d("button",{key:0,onClick:t[0]||(t[0]=o=>m.$emit("upload")),class:"flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-xl font-medium transition-colors shadow-lg font-poppins"},[g(h(T),{class:"w-5 h-5"}),t[1]||(t[1]=$(" Upload Dokumen ",-1))])):M("",!0)]))}},se=D(te,[["__scopeId","data-v-ff402e70"]]),ae={class:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden"},le={key:0,class:"p-12 text-center"},oe={key:1,class:"w-full"},re={class:"divide-y divide-gray-200 dark:divide-gray-700"},ne={class:"px-6 py-4"},ie={class:"font-semibold text-gray-900 dark:text-white font-poppins"},de={key:0,class:"text-sm text-gray-600 dark:text-gray-400 line-clamp-1"},ue={class:"px-6 py-4"},pe={class:"px-2 py-1 rounded text-xs font-semibold bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"},ce={class:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400"},ge={class:"px-6 py-4"},me={class:"flex justify-center"},fe=["onClick"],xe={class:"px-6 py-4"},be={class:"flex items-center justify-center gap-2"},ye=["onClick"],ke=["onClick"],ve={__name:"DokumenListTable",props:{items:{type:Array,required:!0}},emits:["upload","edit","delete","toggle-active"],setup(n){const m=t=>t>=1048576?(t/1048576).toFixed(2)+" MB":t>=1024?(t/1024).toFixed(2)+" KB":t+" B";return(t,o)=>(r(),d("div",ae,[n.items.length===0?(r(),d("div",le,[g(h(N),{class:"w-16 h-16 mx-auto mb-4 text-gray-400"}),o[2]||(o[2]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Belum Ada Dokumen",-1)),o[3]||(o[3]=e("p",{class:"text-gray-600 dark:text-gray-400 mb-6"},"Upload dokumen PPDB pertama",-1)),e("button",{onClick:o[0]||(o[0]=a=>t.$emit("upload")),class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-semibold"},[g(h(T),{class:"w-5 h-5"}),o[1]||(o[1]=$(" Upload Dokumen ",-1))])])):(r(),d("table",oe,[o[4]||(o[4]=e("thead",{class:"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase"},"Judul"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase"},"Tipe"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase"},"Ukuran"),e("th",{class:"px-6 py-4 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase"},"Status"),e("th",{class:"px-6 py-4 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase"},"Action")])],-1)),e("tbody",re,[(r(!0),d(H,null,K(n.items,a=>(r(),d("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[e("td",ne,[e("p",ie,y(a.title),1),a.description?(r(),d("p",de,y(a.description),1)):M("",!0)]),e("td",ue,[e("span",pe,y(a.file_type.toUpperCase()),1)]),e("td",ce,y(m(a.file_size)),1),e("td",ge,[e("div",me,[e("button",{onClick:u=>t.$emit("toggle-active",a),class:O(["px-3 py-1.5 rounded-lg text-xs font-semibold",a.is_active?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"])},y(a.is_active?"Aktif":"Nonaktif"),11,fe)])]),e("td",xe,[e("div",be,[e("button",{onClick:u=>t.$emit("edit",a),class:"p-2 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 hover:bg-blue-100"},[g(h(z),{class:"w-4 h-4"})],8,ye),e("button",{onClick:u=>t.$emit("delete",a.id),class:"p-2 rounded-lg bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-100"},[g(h(V),{class:"w-4 h-4"})],8,ke)])])]))),128))])]))]))}},he=D(ve,[["__scopeId","data-v-45cb35b5"]]),we={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},_e={class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"},$e={class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2"},De={key:0,class:"text-red-500"},Be={key:1,class:"text-xs text-gray-500 font-normal"},Ce=["required"],Me={class:"flex items-center gap-3 pt-4"},Ue=["disabled"],Fe={__name:"DokumenListModal",props:{show:{type:Boolean,default:!1},editMode:{type:Boolean,default:!1},form:{type:Object,default:()=>({title:"",description:"",file:null})},submitting:{type:Boolean,default:!1}},emits:["close","submit","file-change"],setup(n,{emit:m}){const t=n,o=m,a=f({...t.form}),u=f(null);F(()=>t.form,i=>{a.value={...i}},{deep:!0}),F(()=>t.show,i=>{!i&&u.value&&(u.value.value="")});const x=i=>{a.value.file=i.target.files[0],o("file-change",i.target.files[0])},b=()=>{o("submit",a.value)};return(i,l)=>(r(),L(R,{to:"body"},[g(Q,null,{default:J(()=>[n.show?(r(),d("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",onClick:l[4]||(l[4]=C(p=>i.$emit("close"),["self"]))},[e("div",{class:"bg-white dark:bg-gray-800 rounded-2xl max-w-2xl w-full border border-gray-200 dark:border-gray-700 shadow-2xl",onClick:l[3]||(l[3]=C(()=>{},["stop"]))},[e("div",we,[e("h2",_e,y(n.editMode?"Edit Dokumen":"Upload Dokumen Baru"),1),e("button",{onClick:l[0]||(l[0]=p=>i.$emit("close")),class:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"},[g(h(q),{class:"w-5 h-5 text-gray-500"})])]),e("form",{onSubmit:C(b,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[l[5]||(l[5]=e("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2"},[$(" Nama Dokumen "),e("span",{class:"text-red-500"},"*")],-1)),W(e("input",{"onUpdate:modelValue":l[1]||(l[1]=p=>a.value.title=p),type:"text",required:"",class:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 dark:text-white"},null,512),[[X,a.value.title]])]),e("div",null,[e("label",$e,[l[6]||(l[6]=$(" File ",-1)),n.editMode?(r(),d("span",Be,"(opsional - untuk mengganti file)")):(r(),d("span",De,"*"))]),e("input",{ref_key:"fileInput",ref:u,type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx",onChange:x,required:!n.editMode,class:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-blue-50 dark:file:bg-blue-900/20 file:text-blue-700 dark:file:text-blue-400 file:font-semibold"},null,40,Ce),l[7]||(l[7]=e("p",{class:"mt-1 text-xs text-gray-500"},"PDF, Word, Excel. Max: 10MB",-1))]),e("div",Me,[e("button",{type:"button",onClick:l[2]||(l[2]=p=>i.$emit("close")),class:"flex-1 px-4 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-semibold"}," Batal "),e("button",{type:"submit",disabled:n.submitting,class:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-semibold disabled:opacity-50"},y(n.submitting?"Menyimpan...":n.editMode?"Update":"Upload"),9,Ue)])],32)])])):M("",!0)]),_:1})]))}},Te=D(Fe,[["__scopeId","data-v-81d1c87c"]]),Le={class:"space-y-6"},Pe={key:0,class:"py-20"},Se={__name:"DokumenList",setup(n){const{showSuccess:m,showError:t,confirmDelete:o}=G(),a=f([]),u=f(!1),x=f(!1),b=f(!1),i=f(!1);let l=null;const p=f({title:"",description:"",file:null});Y(()=>{_(),l=setInterval(()=>{_()},3e4)}),Z(()=>{l&&clearInterval(l)});const _=async()=>{u.value=!0;try{const s=await w.get("/yasmin-panel/documents");s.data.success&&(a.value=s.data.data)}catch{}finally{u.value=!1}},P=s=>{p.value.file=s},S=async s=>{var c,k;i.value=!0;try{const v=new FormData;v.append("title",s.title),s.description&&v.append("description",s.description),s.file&&v.append("file",s.file);let B;b.value?B=await w.put(`/yasmin-panel/documents/${p.value.id}`,{title:s.title,description:s.description}):B=await w.post("/yasmin-panel/documents",v,{headers:{"Content-Type":"multipart/form-data"}}),B.data.success&&(await m("Berhasil!",b.value?"Dokumen berhasil diupdate!":"Dokumen berhasil diupload!"),U(),_())}catch(v){await t("Gagal!",((k=(c=v.response)==null?void 0:c.data)==null?void 0:k.message)||"Gagal menyimpan dokumen")}finally{i.value=!1}},I=s=>{b.value=!0,p.value={id:s.id,title:s.title,description:s.description||""},x.value=!0},j=async s=>{if((await o("Hapus Dokumen?","Dokumen yang dihapus tidak dapat dikembalikan")).isConfirmed)try{(await w.delete(`/yasmin-panel/documents/${s}`)).data.success&&(await m("Berhasil!","Dokumen berhasil dihapus!"),_())}catch{await t("Gagal!","Gagal menghapus dokumen")}},A=async s=>{try{(await w.put(`/yasmin-panel/documents/${s.id}/toggle`)).data.success&&(s.is_active=!s.is_active,await m("Berhasil!","Status dokumen berhasil diubah!"))}catch{await t("Gagal!","Gagal mengubah status dokumen")}},U=()=>{x.value=!1,b.value=!1,p.value={title:"",description:"",file:null}};return(s,c)=>(r(),d("div",Le,[g(se,{"has-documents":a.value.length>0,onUpload:c[0]||(c[0]=k=>x.value=!0)},null,8,["has-documents"]),u.value?(r(),d("div",Pe,[g(E,{size:"lg",color:"blue"})])):(r(),L(he,{key:1,items:a.value,onUpload:c[1]||(c[1]=k=>x.value=!0),onEdit:I,onDelete:j,onToggleActive:A},null,8,["items"])),g(Te,{show:x.value,"edit-mode":b.value,form:p.value,submitting:i.value,onClose:U,onSubmit:S,onFileChange:P},null,8,["show","edit-mode","form","submitting"])]))}},Ee=D(Se,[["__scopeId","data-v-ba57a8b4"]]);export{Ee as default};
