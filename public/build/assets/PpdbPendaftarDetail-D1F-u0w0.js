import{i as g,k as o,l as t,t as s,R as I,q as L,r as d,o as M,j as w,f as $,e,u as U,F as G,A as R,g as r,B as D,O as V,W as H,P as E}from"./vendor-0BLfaBTW.js";import{a as N,c as S,d as q}from"./app-F21Gw_vX.js";import{A as F}from"./ui-BH4Jb6j-.js";const J={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-700"},W={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 font-poppins"},z={class:"space-y-3"},O={__name:"DataSection",props:{title:{type:String,required:!0}},setup(p){return(v,_)=>(o(),g("div",J,[t("h3",W,s(p.title),1),t("div",z,[I(v.$slots,"default",{},void 0,!0)])]))}},i=N(O,[["__scopeId","data-v-e425e0c4"]]),Q={class:"flex justify-between py-2 border-b border-gray-100 dark:border-gray-700 last:border-0"},X={class:"text-sm text-gray-500 dark:text-gray-400"},Y={class:"text-sm font-medium text-gray-900 dark:text-white text-right"},l={__name:"DataRow",props:{label:{type:String,required:!0},value:{type:[String,Number],default:""}},setup(p){return(v,_)=>(o(),g("div",Q,[t("span",X,s(p.label),1),t("span",Y,s(p.value||"-"),1)]))}},Z={class:"space-y-6"},aa={class:"flex items-center gap-4"},ea={class:"text-gray-500 text-sm font-mono"},la={key:0,class:"flex items-center justify-center py-12"},ta={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-700"},ua={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},na={class:"text-xl font-bold text-gray-900 dark:text-white"},sa={class:"text-gray-500"},ra={class:"flex items-center gap-3"},ia={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},oa=["disabled"],da={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},va={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full mx-4 shadow-xl"},ba={class:"flex gap-3"},ga=["disabled"],pa={__name:"PpdbPendaftarDetail",setup(p){const v=L(),{showSuccess:_,showError:x}=q(),P=d(!0),a=d(null),c=d(""),y=d(!1),k=d(!1),m=d(""),f=d(!1),j=async()=>{try{const n=await S.get(`/yasmin-panel/ppdb/registrations/${v.params.id}`);n.data.success&&(a.value=n.data.data,c.value=a.value.catatan_admin||"",m.value=a.value.status)}catch(n){console.error("Failed to fetch registration:",n),x("Error","Gagal memuat data pendaftar")}finally{P.value=!1}},C=async()=>{var n,u;f.value=!0;try{await S.put(`/yasmin-panel/ppdb/registrations/${v.params.id}/status`,{status:m.value,catatan_admin:c.value}),a.value.status=m.value,k.value=!1,_("Berhasil!","Status berhasil diupdate")}catch(h){x("Gagal!",((u=(n=h.response)==null?void 0:n.data)==null?void 0:u.message)||"Gagal update status")}finally{f.value=!1}},T=async()=>{y.value=!0;try{await S.put(`/yasmin-panel/ppdb/registrations/${v.params.id}/status`,{status:a.value.status,catatan_admin:c.value}),_("Berhasil!","Catatan disimpan")}catch{x("Gagal!","Gagal menyimpan catatan")}finally{y.value=!1}},A=n=>n?new Date(n).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}):"-",B=n=>({pending:"Menunggu",verified:"Terverifikasi",selection:"Seleksi",accepted:"Diterima",rejected:"Ditolak"})[n]||n,K=n=>({pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",verified:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",selection:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",accepted:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",rejected:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"})[n]||"bg-gray-100 text-gray-800";return M(()=>{j()}),(n,u)=>{var h;return o(),g("div",Z,[t("div",aa,[t("button",{onClick:u[0]||(u[0]=b=>n.$router.back()),class:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},[e(U(F),{class:"w-5 h-5 text-gray-600 dark:text-gray-400"})]),t("div",null,[u[5]||(u[5]=t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"},"Detail Pendaftar",-1)),t("p",ea,s((h=a.value)==null?void 0:h.registration_number),1)])]),P.value?(o(),g("div",la,[...u[6]||(u[6]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):a.value?(o(),g(G,{key:1},[t("div",ta,[t("div",ua,[t("div",null,[t("h2",na,s(a.value.nama_lengkap),1),t("p",sa,s(a.value.asal_sekolah)+" - "+s(a.value.jurusan_pilihan),1)]),t("div",ra,[t("span",{class:R([K(a.value.status),"px-4 py-2 rounded-full text-sm font-semibold"])},s(B(a.value.status)),3),t("button",{onClick:u[1]||(u[1]=b=>k.value=!0),class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-sm font-medium transition-colors"}," Update Status ")])])]),t("div",ia,[e(i,{title:"Identitas Diri"},{default:r(()=>[e(l,{label:"NIK",value:a.value.nik},null,8,["value"]),e(l,{label:"NISN",value:a.value.nisn},null,8,["value"]),e(l,{label:"Tempat, Tanggal Lahir",value:`${a.value.tempat_lahir}, ${A(a.value.tanggal_lahir)}`},null,8,["value"]),e(l,{label:"Jenis Kelamin",value:a.value.jenis_kelamin},null,8,["value"]),e(l,{label:"Agama",value:a.value.agama},null,8,["value"]),e(l,{label:"Anak ke / Jumlah Saudara",value:`${a.value.anak_ke} dari ${a.value.jumlah_saudara} bersaudara`},null,8,["value"]),e(l,{label:"No. HP",value:a.value.no_hp},null,8,["value"]),e(l,{label:"Email",value:a.value.email},null,8,["value"])]),_:1}),e(i,{title:"Alamat"},{default:r(()=>[e(l,{label:"Alamat Lengkap",value:a.value.alamat_lengkap},null,8,["value"]),e(l,{label:"RT/RW",value:`${a.value.rt}/${a.value.rw}`},null,8,["value"]),e(l,{label:"Kelurahan",value:a.value.kelurahan},null,8,["value"]),e(l,{label:"Kecamatan",value:a.value.kecamatan},null,8,["value"]),e(l,{label:"Kota/Kabupaten",value:a.value.kota_kabupaten},null,8,["value"]),e(l,{label:"Provinsi",value:a.value.provinsi},null,8,["value"]),e(l,{label:"Kode Pos",value:a.value.kode_pos},null,8,["value"])]),_:1}),e(i,{title:"Pendidikan"},{default:r(()=>[e(l,{label:"Asal Sekolah",value:a.value.asal_sekolah},null,8,["value"]),e(l,{label:"NPSN",value:a.value.npsn_sekolah},null,8,["value"]),e(l,{label:"Tahun Lulus",value:a.value.tahun_lulus},null,8,["value"]),e(l,{label:"Jurusan Pilihan",value:a.value.jurusan_pilihan},null,8,["value"])]),_:1}),e(i,{title:"Kesehatan"},{default:r(()=>[e(l,{label:"Golongan Darah",value:a.value.golongan_darah},null,8,["value"]),e(l,{label:"Tinggi Badan",value:a.value.tinggi_badan?`${a.value.tinggi_badan} cm`:"-"},null,8,["value"]),e(l,{label:"Berat Badan",value:a.value.berat_badan?`${a.value.berat_badan} kg`:"-"},null,8,["value"]),e(l,{label:"Riwayat Penyakit",value:a.value.riwayat_penyakit},null,8,["value"]),e(l,{label:"Alergi",value:a.value.alergi?a.value.keterangan_alergi:"Tidak ada"},null,8,["value"])]),_:1}),e(i,{title:"Data Ayah"},{default:r(()=>[e(l,{label:"Nama",value:a.value.nama_ayah},null,8,["value"]),e(l,{label:"NIK",value:a.value.nik_ayah},null,8,["value"]),e(l,{label:"Pekerjaan",value:a.value.pekerjaan_ayah},null,8,["value"]),e(l,{label:"Pendidikan",value:a.value.pendidikan_ayah},null,8,["value"]),e(l,{label:"Penghasilan",value:a.value.penghasilan_ayah},null,8,["value"]),e(l,{label:"No. HP",value:a.value.no_hp_ayah},null,8,["value"])]),_:1}),e(i,{title:"Data Ibu"},{default:r(()=>[e(l,{label:"Nama",value:a.value.nama_ibu},null,8,["value"]),e(l,{label:"NIK",value:a.value.nik_ibu},null,8,["value"]),e(l,{label:"Pekerjaan",value:a.value.pekerjaan_ibu},null,8,["value"]),e(l,{label:"Pendidikan",value:a.value.pendidikan_ibu},null,8,["value"]),e(l,{label:"Penghasilan",value:a.value.penghasilan_ibu},null,8,["value"]),e(l,{label:"No. HP",value:a.value.no_hp_ibu},null,8,["value"])]),_:1}),a.value.nama_wali?(o(),$(i,{key:0,title:"Data Wali"},{default:r(()=>[e(l,{label:"Nama",value:a.value.nama_wali},null,8,["value"]),e(l,{label:"Hubungan",value:a.value.hubungan_wali},null,8,["value"]),e(l,{label:"Pekerjaan",value:a.value.pekerjaan_wali},null,8,["value"]),e(l,{label:"No. HP",value:a.value.no_hp_wali},null,8,["value"])]),_:1})):w("",!0),e(i,{title:"Catatan Admin",class:"lg:col-span-2"},{default:r(()=>[D(t("textarea",{"onUpdate:modelValue":u[2]||(u[2]=b=>c.value=b),rows:"3",placeholder:"Tambahkan catatan...",class:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"},null,512),[[V,c.value]]),t("button",{onClick:T,disabled:y.value,class:"mt-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg text-sm font-medium disabled:opacity-50"},s(y.value?"Menyimpan...":"Simpan Catatan"),9,oa)]),_:1})])],64)):w("",!0),(o(),$(E,{to:"body"},[k.value?(o(),g("div",da,[t("div",va,[u[8]||(u[8]=t("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Update Status",-1)),D(t("select",{"onUpdate:modelValue":u[3]||(u[3]=b=>m.value=b),class:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl mb-4 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"},[...u[7]||(u[7]=[t("option",{value:"pending"},"Menunggu Verifikasi",-1),t("option",{value:"verified"},"Terverifikasi",-1),t("option",{value:"selection"},"Tahap Seleksi",-1),t("option",{value:"accepted"},"Diterima",-1),t("option",{value:"rejected"},"Ditolak",-1)])],512),[[H,m.value]]),t("div",ba,[t("button",{onClick:u[4]||(u[4]=b=>k.value=!1),class:"flex-1 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-medium"}," Batal "),t("button",{onClick:C,disabled:f.value,class:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium disabled:opacity-50"},s(f.value?"Updating...":"Update"),9,ga)])])])):w("",!0)]))])}}},ya=N(pa,[["__scopeId","data-v-8726e3ab"]]);export{ya as default};
