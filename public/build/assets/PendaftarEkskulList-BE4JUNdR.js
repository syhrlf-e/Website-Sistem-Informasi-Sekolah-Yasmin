import{a as $,L as Y,d as J,c as Q}from"./app-F21Gw_vX.js";import{f as _,g as W,a as Z,d as tt,b as et,c as st}from"./ekskulRegistrationService-DwKLzNOY.js";import{S as at,X as rt,p as ot,C as nt,l as N,m as U,a8 as lt,G as it,ac as dt}from"./ui-BH4Jb6j-.js";import{i as l,k as o,l as t,e as p,u as y,F as T,C as V,t as i,r as b,w as pt,g as E,j as m,U as A,A as z,T as G,B as ct,O as ut,f as gt,m as xt,a as F,o as ft}from"./vendor-0BLfaBTW.js";const kt={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700"},yt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},mt={class:"md:col-span-2"},bt={class:"relative"},vt=["value"],ht=["value"],wt=["value"],$t=["value"],jt={__name:"PendaftarListFilters",props:{search:String,status:String,ekskulId:String,ekskulList:Array},emits:["update:search","update:status","update:ekskulId"],setup(s){return(u,a)=>(o(),l("div",kt,[t("div",yt,[t("div",mt,[a[3]||(a[3]=t("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2 font-poppins"},"Cari",-1)),t("div",bt,[t("input",{value:s.search,onInput:a[0]||(a[0]=c=>u.$emit("update:search",c.target.value)),type:"text",placeholder:"Cari nama, email, atau telepon...",class:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 text-gray-900 dark:text-white font-poppins"},null,40,vt),p(y(at),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})])]),t("div",null,[a[5]||(a[5]=t("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2 font-poppins"},"Status",-1)),t("select",{value:s.status,onChange:a[1]||(a[1]=c=>u.$emit("update:status",c.target.value)),class:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 text-gray-900 dark:text-white font-poppins"},[...a[4]||(a[4]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"pending"},"Menunggu",-1),t("option",{value:"approved"},"Diterima",-1),t("option",{value:"rejected"},"Ditolak",-1)])],40,ht)]),t("div",null,[a[7]||(a[7]=t("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2 font-poppins"},"Ekstrakurikuler",-1)),t("select",{value:s.ekskulId,onChange:a[2]||(a[2]=c=>u.$emit("update:ekskulId",c.target.value)),class:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 text-gray-900 dark:text-white font-poppins"},[a[6]||(a[6]=t("option",{value:""},"Semua Ekskul",-1)),(o(!0),l(T,null,V(s.ekskulList,c=>(o(),l("option",{key:c.id,value:c.id},i(c.name),9,$t))),128))],40,wt)])])]))}},Ct=$(jt,[["__scopeId","data-v-2691208a"]]),_t={},Rt={class:"flex items-center justify-between"};function Lt(s,u){return o(),l("div",Rt,[...u[0]||(u[0]=[t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"},"Pendaftar Ekstrakurikuler"),t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins mt-1"},"Kelola pendaftaran ekstrakurikuler siswa")],-1)])])}const St=$(_t,[["render",Lt],["__scopeId","data-v-a3894813"]]),Dt={class:"bg-white dark:bg-gray-900 rounded-3xl p-8 max-w-2xl w-full shadow-2xl max-h-[90vh] overflow-y-auto"},Tt={class:"flex items-center justify-between mb-6"},Pt={key:0,class:"space-y-4"},Bt={class:"grid grid-cols-2 gap-4"},Mt={class:"text-base font-semibold text-gray-900 dark:text-white font-poppins"},It={class:"text-base font-semibold text-gray-900 dark:text-white font-poppins"},Et={class:"text-base font-semibold text-gray-900 dark:text-white font-poppins"},At={class:"text-base font-semibold text-gray-900 dark:text-white font-poppins"},Gt={class:"text-base font-semibold text-gray-900 dark:text-white font-poppins"},Ft={class:"text-base text-gray-900 dark:text-white font-poppins leading-relaxed"},Nt={key:0},Ut={class:"text-base text-red-600 dark:text-red-400 font-poppins"},Vt={class:"flex gap-3 pt-4"},zt={class:"bg-white dark:bg-gray-900 rounded-3xl p-8 max-w-md w-full shadow-2xl"},Ht={class:"flex gap-3 mt-6"},Kt=["disabled"],Ot={__name:"PendaftarListModals",props:{showDetail:Boolean,showReject:Boolean,selectedRegistration:Object,processing:Boolean},emits:["close-detail","close-reject","approve","reject","confirm-reject"],setup(s){const u=s,a=b("");pt(()=>u.showReject,r=>{r||(a.value="")});const c=r=>{const e=_(r);return`${e.bgClass} ${e.textClass}`},g=r=>_(r).label;return(r,e)=>(o(),l(T,null,[p(G,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","leave-active-class":"transition-opacity duration-200","leave-to-class":"opacity-0"},{default:E(()=>{var d;return[s.showDetail?(o(),l("div",{key:0,class:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e[4]||(e[4]=A(f=>r.$emit("close-detail"),["self"]))},[t("div",Dt,[t("div",Tt,[e[9]||(e[9]=t("h3",{class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"},"Detail Pendaftar",-1)),t("button",{onClick:e[0]||(e[0]=f=>r.$emit("close-detail")),class:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg"},[p(y(rt),{class:"w-5 h-5 text-gray-500"})])]),s.selectedRegistration?(o(),l("div",Pt,[t("div",Bt,[t("div",null,[e[10]||(e[10]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Nama",-1)),t("p",Mt,i(s.selectedRegistration.nama),1)]),t("div",null,[e[11]||(e[11]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Kelas",-1)),t("p",It,i(s.selectedRegistration.kelas),1)]),t("div",null,[e[12]||(e[12]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Email",-1)),t("p",Et,i(s.selectedRegistration.email),1)]),t("div",null,[e[13]||(e[13]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Telepon",-1)),t("p",At,i(s.selectedRegistration.phone),1)])]),t("div",null,[e[14]||(e[14]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins mb-2"},"Ekstrakurikuler",-1)),t("p",Gt,i(((d=s.selectedRegistration.ekstrakurikuler)==null?void 0:d.name)||"-"),1)]),t("div",null,[e[15]||(e[15]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins mb-2"},"Alasan Bergabung",-1)),t("p",Ft,i(s.selectedRegistration.alasan),1)]),t("div",null,[e[16]||(e[16]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins mb-2"},"Status",-1)),t("span",{class:z(["px-3 py-1 rounded-full text-sm font-semibold",c(s.selectedRegistration.status)])},i(g(s.selectedRegistration.status)),3)]),s.selectedRegistration.rejection_reason?(o(),l("div",Nt,[e[17]||(e[17]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins mb-2"},"Alasan Penolakan",-1)),t("p",Ut,i(s.selectedRegistration.rejection_reason),1)])):m("",!0),t("div",Vt,[s.selectedRegistration.status==="pending"?(o(),l("button",{key:0,onClick:e[1]||(e[1]=f=>r.$emit("approve",s.selectedRegistration)),class:"flex-1 px-6 py-3 bg-green-600 text-white rounded-xl font-semibold hover:bg-green-700"},"Terima")):m("",!0),s.selectedRegistration.status==="pending"?(o(),l("button",{key:1,onClick:e[2]||(e[2]=f=>r.$emit("reject",s.selectedRegistration)),class:"flex-1 px-6 py-3 bg-red-600 text-white rounded-xl font-semibold hover:bg-red-700"},"Tolak")):m("",!0),t("button",{onClick:e[3]||(e[3]=f=>r.$emit("close-detail")),class:"flex-1 px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-xl font-semibold"},"Tutup")])])):m("",!0)])])):m("",!0)]}),_:1}),p(G,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","leave-active-class":"transition-opacity duration-200","leave-to-class":"opacity-0"},{default:E(()=>[s.showReject?(o(),l("div",{key:0,class:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e[8]||(e[8]=A(d=>r.$emit("close-reject"),["self"]))},[t("div",zt,[e[18]||(e[18]=t("h3",{class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins mb-4"},"Tolak Pendaftaran",-1)),e[19]||(e[19]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins mb-4"},"Berikan alasan penolakan (opsional):",-1)),ct(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=d=>a.value=d),rows:"4",placeholder:"Contoh: Kuota sudah penuh",class:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl resize-none"},null,512),[[ut,a.value]]),t("div",Ht,[t("button",{onClick:e[6]||(e[6]=d=>r.$emit("close-reject")),class:"flex-1 px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-xl font-semibold"},"Batal"),t("button",{onClick:e[7]||(e[7]=d=>r.$emit("confirm-reject",a.value)),disabled:s.processing,class:"flex-1 px-6 py-3 bg-red-600 text-white rounded-xl font-semibold disabled:opacity-50 flex items-center justify-center gap-2"},[s.processing?(o(),gt(y(ot),{key:0,class:"w-5 h-5 animate-spin"})):m("",!0),xt(" "+i(s.processing?"Memproses...":"Tolak"),1)],8,Kt)])])])):m("",!0)]),_:1})],64))}},qt=$(Ot,[["__scopeId","data-v-10623257"]]),Xt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Yt={class:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-2xl p-4"},Jt={class:"flex items-center gap-3"},Qt={class:"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl flex items-center justify-center"},Wt={class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"},Zt={class:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-2xl p-4"},te={class:"flex items-center gap-3"},ee={class:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center"},se={class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"},ae={class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-2xl p-4"},re={class:"flex items-center gap-3"},oe={class:"w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-xl flex items-center justify-center"},ne={class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"},le={__name:"PendaftarListStats",props:{stats:{type:Object,required:!0}},setup(s){return(u,a)=>(o(),l("div",Xt,[t("div",Yt,[t("div",Jt,[t("div",Qt,[p(y(nt),{class:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})]),t("div",null,[a[0]||(a[0]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Menunggu",-1)),t("p",Wt,i(s.stats.pending||0),1)])])]),t("div",Zt,[t("div",te,[t("div",ee,[p(y(N),{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),t("div",null,[a[1]||(a[1]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Diterima",-1)),t("p",se,i(s.stats.approved||0),1)])])]),t("div",ae,[t("div",re,[t("div",oe,[p(y(U),{class:"w-6 h-6 text-red-600 dark:text-red-400"})]),t("div",null,[a[2]||(a[2]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Ditolak",-1)),t("p",ne,i(s.stats.rejected||0),1)])])])]))}},ie=$(le,[["__scopeId","data-v-6ff71e1e"]]),de={class:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden"},pe={key:0,class:"p-12"},ce={key:1,class:"p-12 text-center"},ue={class:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4"},ge={key:2,class:"overflow-x-auto"},xe={class:"w-full"},fe={class:"divide-y divide-gray-200 dark:divide-gray-700"},ke={class:"px-6 py-4"},ye={class:"text-sm font-semibold text-gray-900 dark:text-white font-poppins"},me={class:"text-xs text-gray-500 dark:text-gray-400 font-poppins"},be={class:"px-6 py-4"},ve={class:"text-sm text-gray-900 dark:text-white font-poppins"},he={class:"px-6 py-4"},we={class:"text-sm text-gray-900 dark:text-white font-poppins"},$e={class:"px-6 py-4"},je={class:"px-6 py-4"},Ce={class:"text-sm text-gray-900 dark:text-white font-poppins"},_e={class:"px-6 py-4"},Re={class:"flex items-center justify-end gap-2"},Le=["onClick"],Se=["onClick"],De=["onClick"],Te=["onClick"],Pe={__name:"PendaftarListTable",props:{items:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["view","approve","reject","delete"],setup(s){const u=g=>{const r=_(g);return`${r.bgClass} ${r.textClass}`},a=g=>_(g).label,c=g=>new Date(g).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"});return(g,r)=>(o(),l("div",de,[s.loading?(o(),l("div",pe,[p(Y,{size:"md",color:"emerald"})])):s.items.length===0?(o(),l("div",ce,[t("div",ue,[p(y(lt),{class:"w-8 h-8 text-gray-400"})]),r[0]||(r[0]=t("p",{class:"text-gray-600 dark:text-gray-400 font-poppins"},"Belum ada pendaftar",-1))])):(o(),l("div",ge,[t("table",xe,[r[1]||(r[1]=t("thead",{class:"bg-gray-50 dark:bg-gray-900/50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider font-poppins"},"Nama"),t("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider font-poppins"},"Ekstrakurikuler"),t("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider font-poppins"},"Kelas"),t("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider font-poppins"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider font-poppins"},"Tanggal"),t("th",{class:"px-6 py-3 text-right text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider font-poppins"},"Aksi")])],-1)),t("tbody",fe,[(o(!0),l(T,null,V(s.items,e=>{var d;return o(),l("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-900/30 transition-colors"},[t("td",ke,[t("div",null,[t("p",ye,i(e.nama),1),t("p",me,i(e.email),1)])]),t("td",be,[t("p",ve,i(((d=e.ekstrakurikuler)==null?void 0:d.name)||"-"),1)]),t("td",he,[t("p",we,i(e.kelas),1)]),t("td",$e,[t("span",{class:z(["px-3 py-1 rounded-full text-xs font-semibold font-poppins",u(e.status)])},i(a(e.status)),3)]),t("td",je,[t("p",Ce,i(c(e.created_at)),1)]),t("td",_e,[t("div",Re,[t("button",{onClick:f=>g.$emit("view",e),class:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"Lihat Detail"},[p(y(it),{class:"w-4 h-4"})],8,Le),e.status==="pending"?(o(),l("button",{key:0,onClick:f=>g.$emit("approve",e),class:"p-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg",title:"Terima"},[p(y(N),{class:"w-4 h-4"})],8,Se)):m("",!0),e.status==="pending"?(o(),l("button",{key:1,onClick:f=>g.$emit("reject",e),class:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",title:"Tolak"},[p(y(U),{class:"w-4 h-4"})],8,De)):m("",!0),t("button",{onClick:f=>g.$emit("delete",e),class:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",title:"Hapus"},[p(y(dt),{class:"w-4 h-4"})],8,Te)])])])}),128))])])]))]))}},Be=$(Pe,[["__scopeId","data-v-d81fe5de"]]),Me={class:"space-y-6"},Ie={__name:"PendaftarEkskulList",setup(s){const{showSuccess:u,showError:a,confirm:c}=J(),g=b([]),r=b([]),e=F({pending:0,approved:0,rejected:0}),d=F({search:"",status:"",ekstrakurikuler_id:""}),f=b(!1),j=b(!1),R=b(!1),L=b(!1),v=b(null);let P=null;const h=async()=>{f.value=!0;try{const n=await W(d);g.value=n.data||[]}catch{await a("Gagal Memuat Data","Gagal memuat data pendaftar")}finally{f.value=!1}},C=async()=>{try{const n=await Z();Object.assign(e,n.data)}catch{}},H=async()=>{try{const n=await Q.get("/admin/ekstrakurikuler");r.value=n.data.data||[]}catch{}},K=()=>{clearTimeout(P),P=setTimeout(h,500)},O=n=>{v.value=n,R.value=!0},S=()=>{R.value=!1,v.value=null},B=()=>{L.value=!1,v.value=null},M=async n=>{var x,w;if((await c(`Terima pendaftaran dari ${n.nama}?`,"Pendaftar akan menerima email konfirmasi","Ya, Terima")).isConfirmed){j.value=!0;try{await et(n.id),await u("Berhasil!","Pendaftaran berhasil diterima!"),await h(),await C(),S()}catch(D){await a("Gagal Menerima",((w=(x=D.response)==null?void 0:x.data)==null?void 0:w.message)||"Gagal menerima pendaftaran")}finally{j.value=!1}}},I=n=>{v.value=n,L.value=!0},q=async n=>{var k,x;if(v.value){j.value=!0;try{await st(v.value.id,n),await u("Berhasil!","Pendaftaran berhasil ditolak!"),await h(),await C(),B(),S()}catch(w){await a("Gagal Menolak",((x=(k=w.response)==null?void 0:k.data)==null?void 0:x.message)||"Gagal menolak pendaftaran")}finally{j.value=!1}}},X=async n=>{var x,w;if((await c(`Hapus pendaftaran dari ${n.nama}?`,"Tindakan ini tidak dapat dibatalkan","Ya, Hapus")).isConfirmed)try{await tt(n.id),await u("Berhasil!","Pendaftaran berhasil dihapus!"),await h(),await C()}catch(D){await a("Gagal Menghapus",((w=(x=D.response)==null?void 0:x.data)==null?void 0:w.message)||"Gagal menghapus pendaftaran")}};return ft(()=>{h(),C(),H()}),(n,k)=>(o(),l("div",Me,[p(St),p(ie,{stats:e},null,8,["stats"]),p(Ct,{search:d.search,"onUpdate:search":[k[0]||(k[0]=x=>d.search=x),K],status:d.status,"onUpdate:status":[k[1]||(k[1]=x=>d.status=x),h],"ekskul-id":d.ekstrakurikuler_id,"onUpdate:ekskulId":[k[2]||(k[2]=x=>d.ekstrakurikuler_id=x),h],"ekskul-list":r.value},null,8,["search","status","ekskul-id","ekskul-list"]),p(Be,{items:g.value,loading:f.value,onView:O,onApprove:M,onReject:I,onDelete:X},null,8,["items","loading"]),p(qt,{"show-detail":R.value,"show-reject":L.value,"selected-registration":v.value,processing:j.value,onCloseDetail:S,onCloseReject:B,onApprove:M,onReject:I,onConfirmReject:q},null,8,["show-detail","show-reject","selected-registration","processing"])]))}},Ne=$(Ie,[["__scopeId","data-v-1777e697"]]);export{Ne as default};
