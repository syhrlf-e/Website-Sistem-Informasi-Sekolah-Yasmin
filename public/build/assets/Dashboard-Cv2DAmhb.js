import{c as O,a as F,L as xe,d as fe}from"./app-F21Gw_vX.js";import{z as ye,r as k,c as I,w as G,i as g,k as i,f as K,e as l,g as J,j as E,U as Z,l as e,B as V,m as R,t as o,O as W,T as ee,P as re,u as b,F as L,s as oe,C as z,o as te,A as Y,a as me,b as ve}from"./vendor-0BLfaBTW.js";import{X as H,h as ke,a3 as le,u as de,C as ie,l as ue,m as ce,a2 as ge,a7 as he,a8 as we,N as _e,g as $e,a4 as je,a9 as ne,k as De,a as Ce,aa as Pe,ab as Se,ac as Me}from"./ui-BH4Jb6j-.js";const Ae=ye("pendaftar",()=>{const c=k({berita:0,berita_published:0,berita_draft:0,berita_featured:0,ekskul:0,galeri:0,prestasi:0,pendaftar:0,pendaftar_pending:0,pendaftar_approved:0,pendaftar_rejected:0}),_=k([]),n=k(!0),s=k(!1),t=k(null);let a=null;const f=I(()=>c.value.pendaftar_pending||0),$=I(()=>s.value),j=async()=>{try{const w=await O.get("/yasmin-panel/dashboard/stats");w.data.success&&(c.value=w.data.data,s.value=!0,t.value=null)}catch(w){console.error("Error fetching stats:",w),t.value="Gagal memuat statistik"}finally{n.value=!1}},d=async()=>{try{const w=await O.get("/yasmin-panel/dashboard/pendaftar");w.data.success&&(_.value=w.data.data)}catch(w){console.error("Error fetching pendaftar:",w)}},r=async()=>{await Promise.all([j(),d()])},u=()=>{a||(s.value||r(),a=setInterval(()=>{r()},15e3),A())},D=()=>{a&&(clearInterval(a),a=null)};let C=!1;const m=()=>{document.hidden?D():a||(r(),a=setInterval(()=>r(),15e3))},A=()=>{C||(document.addEventListener("visibilitychange",m),C=!0)};return{stats:c,recentPendaftar:_,isInitialLoading:n,isLoaded:s,error:t,pendingCount:f,hasData:$,fetchStats:j,fetchRecentPendaftar:d,fetchAll:r,startPolling:u,stopPolling:D,reset:()=>{D(),c.value={berita:0,berita_published:0,berita_draft:0,berita_featured:0,ekskul:0,galeri:0,prestasi:0,pendaftar:0,pendaftar_pending:0,pendaftar_approved:0,pendaftar_rejected:0},_.value=[],n.value=!0,s.value=!1,t.value=null}}}),Ie={class:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full p-6 shadow-2xl"},Te={class:"text-sm text-gray-600 dark:text-gray-400 mb-4 font-poppins"},Be={class:"flex gap-3 mt-4"},Ee={class:"bg-white dark:bg-gray-800 rounded-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto shadow-2xl"},Re={class:"flex items-center justify-between mb-6"},Le={key:0,class:"space-y-4"},Ne={class:"font-semibold text-gray-900 dark:text-white font-poppins"},Oe={class:"grid grid-cols-2 gap-4"},Fe={class:"font-semibold text-gray-900 dark:text-white font-poppins"},ze={class:"font-semibold text-gray-900 dark:text-white font-poppins"},Ue={class:"font-semibold text-gray-900 dark:text-white font-poppins"},Ve={class:"font-semibold text-gray-900 dark:text-white font-poppins"},We={class:"text-gray-900 dark:text-white font-poppins leading-relaxed"},Ge={class:"font-semibold text-gray-900 dark:text-white font-poppins"},Je={class:"flex gap-3 mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},qe={__name:"DashboardModals",props:{showReject:Boolean,showDetail:Boolean,selectedPendaftar:Object},emits:["close-reject","close-detail","confirm-reject","approve-from-modal","reject-from-modal"],setup(c){const _=c,n=k("");return G(()=>_.showReject,s=>{s||(n.value="")}),(s,t)=>(i(),g(L,null,[(i(),K(re,{to:"body"},[l(ee,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","leave-active-class":"transition-opacity duration-200","leave-to-class":"opacity-0"},{default:J(()=>{var a;return[c.showReject?(i(),g("div",{key:0,class:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",onClick:t[3]||(t[3]=Z(f=>s.$emit("close-reject"),["self"]))},[e("div",Ie,[t[9]||(t[9]=e("h3",{class:"text-xl font-bold text-gray-900 dark:text-white mb-4 font-poppins"},"Tolak Pendaftaran",-1)),e("p",Te,[t[8]||(t[8]=R(" Berikan alasan penolakan untuk ",-1)),e("strong",null,o((a=c.selectedPendaftar)==null?void 0:a.nama),1)]),V(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=f=>n.value=f),rows:"4",placeholder:"Masukkan alasan penolakan...",class:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl resize-none text-gray-900 dark:text-white font-poppins"},null,512),[[W,n.value]]),e("div",Be,[e("button",{onClick:t[1]||(t[1]=f=>s.$emit("close-reject")),class:"flex-1 px-4 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-semibold font-poppins"},"Batal"),e("button",{onClick:t[2]||(t[2]=f=>s.$emit("confirm-reject",n.value)),class:"flex-1 px-4 py-3 bg-red-600 text-white rounded-xl font-semibold font-poppins"},"Tolak")])])])):E("",!0)]}),_:1})])),(i(),K(re,{to:"body"},[l(ee,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","leave-active-class":"transition-opacity duration-200","leave-to-class":"opacity-0"},{default:J(()=>{var a;return[c.showDetail?(i(),g("div",{key:0,class:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",onClick:t[7]||(t[7]=Z(f=>s.$emit("close-detail"),["self"]))},[e("div",Ee,[e("div",Re,[t[10]||(t[10]=e("h3",{class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"},"Detail Pendaftar",-1)),e("button",{onClick:t[4]||(t[4]=f=>s.$emit("close-detail")),class:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},[l(b(H),{class:"w-5 h-5 text-gray-500"})])]),c.selectedPendaftar?(i(),g("div",Le,[e("div",null,[t[11]||(t[11]=e("label",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Nama Lengkap",-1)),e("p",Ne,o(c.selectedPendaftar.nama_lengkap),1)]),e("div",Oe,[e("div",null,[t[12]||(t[12]=e("label",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Kelas",-1)),e("p",Fe,o(c.selectedPendaftar.kelas),1)]),e("div",null,[t[13]||(t[13]=e("label",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Email",-1)),e("p",ze,o(c.selectedPendaftar.email),1)])]),e("div",null,[t[14]||(t[14]=e("label",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"No. WhatsApp",-1)),e("p",Ue,o(c.selectedPendaftar.no_whatsapp),1)]),e("div",null,[t[15]||(t[15]=e("label",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Ekstrakurikuler",-1)),e("p",Ve,o((a=c.selectedPendaftar.ekstrakurikuler)==null?void 0:a.nama),1)]),e("div",null,[t[16]||(t[16]=e("label",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Alasan Bergabung",-1)),e("p",We,o(c.selectedPendaftar.alasan_bergabung),1)]),e("div",null,[t[17]||(t[17]=e("label",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Waktu Pendaftaran",-1)),e("p",Ge,o(c.selectedPendaftar.created_at),1)])])):E("",!0),e("div",Je,[e("button",{onClick:t[5]||(t[5]=f=>s.$emit("approve-from-modal")),class:"flex-1 px-4 py-3 bg-green-600 text-white rounded-xl font-semibold font-poppins flex items-center justify-center gap-2"},[l(b(ke),{class:"w-5 h-5"}),t[18]||(t[18]=R(" Approve ",-1))]),e("button",{onClick:t[6]||(t[6]=f=>s.$emit("reject-from-modal")),class:"flex-1 px-4 py-3 bg-red-600 text-white rounded-xl font-semibold font-poppins flex items-center justify-center gap-2"},[l(b(H),{class:"w-5 h-5"}),t[19]||(t[19]=R(" Reject ",-1))])])])])):E("",!0)]}),_:1})]))],64))}},Ke=F(qe,[["__scopeId","data-v-2711484e"]]),Ye={class:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden h-full"},He={class:"flex items-center justify-between p-5 border-b border-gray-200 dark:border-gray-700"},Xe={class:"flex items-center gap-3"},Qe={class:"w-10 h-10 rounded-lg bg-orange-50 dark:bg-orange-900/20 flex items-center justify-center"},Ze={class:"p-5"},et={class:"grid grid-cols-3 gap-3 mb-5"},tt={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},at={class:"flex items-center justify-between mb-2"},st={class:"w-8 h-8 rounded-lg bg-yellow-50 dark:bg-yellow-900/20 flex items-center justify-center"},rt={class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"},nt={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},ot={class:"flex items-center justify-between mb-2"},lt={class:"w-8 h-8 rounded-lg bg-green-50 dark:bg-green-900/20 flex items-center justify-center"},dt={class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"},it={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},ut={class:"flex items-center justify-between mb-2"},ct={class:"w-8 h-8 rounded-lg bg-red-50 dark:bg-red-900/20 flex items-center justify-center"},gt={class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"},pt={key:0,class:"space-y-2"},bt={class:"text-sm font-medium text-gray-900 dark:text-white"},xt={class:"text-xs text-gray-500 dark:text-gray-400"},ft={key:0,class:"text-xs text-center text-gray-500 dark:text-gray-400 pt-2"},yt={key:1,class:"text-center py-6"},mt={__name:"DashboardPendaftar",props:{items:{type:Array,required:!0},pendingCount:{type:Number,default:0},approvedCount:{type:Number,default:0},rejectedCount:{type:Number,default:0}},setup(c){const _=c,n=I(()=>Math.max(0,_.items.length-3)),s=k(_.pendingCount);return G(()=>_.pendingCount,t=>{const a=s.value;if(t===a)return;const f=Math.abs(t-a);if(f<=2){s.value=t;return}const $=a,j=t,d=400,r=Math.min(f,10),u=(j-$)/r;let D=$,C=0;const m=setInterval(()=>{C++,D+=u,C>=r?(s.value=j,clearInterval(m)):s.value=Math.round(D)},d/r)},{immediate:!0}),(t,a)=>{const f=oe("router-link");return i(),g("div",Ye,[e("div",He,[e("div",Xe,[e("div",Qe,[l(b(le),{class:"w-5 h-5 text-orange-600 dark:text-orange-400"})]),a[0]||(a[0]=e("div",null,[e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white font-poppins"},"Pendaftar Ekskul"),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Ekstrakurikuler ")],-1))]),l(f,{to:"/yasmin-panel/pendaftar",class:"text-sm font-medium text-blue-600 dark:text-blue-400 hover:underline font-poppins flex items-center gap-1"},{default:J(()=>[a[1]||(a[1]=R(" Lihat Semua ",-1)),l(b(de),{class:"w-4 h-4"})]),_:1})]),e("div",Ze,[e("div",et,[e("div",tt,[e("div",at,[e("div",st,[l(b(ie),{class:"w-4 h-4 text-yellow-600 dark:text-yellow-400"})]),a[2]||(a[2]=e("span",{class:"text-xs font-medium text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/20 px-2 py-0.5 rounded-full"},"Pending",-1))]),e("h3",rt,o(s.value),1)]),e("div",nt,[e("div",ot,[e("div",lt,[l(b(ue),{class:"w-4 h-4 text-green-600 dark:text-green-400"})]),a[3]||(a[3]=e("span",{class:"text-xs font-medium text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 px-2 py-0.5 rounded-full"},"Diterima",-1))]),e("h3",dt,o(c.approvedCount),1)]),e("div",it,[e("div",ut,[e("div",ct,[l(b(ce),{class:"w-4 h-4 text-red-600 dark:text-red-400"})]),a[4]||(a[4]=e("span",{class:"text-xs font-medium text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-2 py-0.5 rounded-full"},"Ditolak",-1))]),e("h3",gt,o(c.rejectedCount),1)])]),e("div",null,[a[7]||(a[7]=e("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},"Pendaftar Terbaru",-1)),c.items.length?(i(),g("div",pt,[(i(!0),g(L,null,z(c.items.slice(0,3),$=>(i(),g("div",{key:$.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},[e("div",null,[e("p",bt,o($.nama),1),e("p",xt,o($.ekskul),1)]),a[5]||(a[5]=e("span",{class:"px-2 py-1 bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400 text-xs font-medium rounded-full"}," Menunggu ",-1))]))),128)),n.value>0?(i(),g("p",ft," dan "+o(n.value)+" pendaftar lainnya ",1)):E("",!0)])):(i(),g("div",yt,[l(b(ge),{class:"w-8 h-8 text-gray-300 dark:text-gray-600 mx-auto mb-2"}),a[6]||(a[6]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Belum ada pendaftar baru hari ini",-1))]))])])])}}},vt=F(mt,[["__scopeId","data-v-e1a6d322"]]),kt={class:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden h-full"},ht={class:"flex items-center justify-between p-5 border-b border-gray-200 dark:border-gray-700"},wt={class:"flex items-center gap-3"},_t={class:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center"},$t={class:"text-sm text-gray-600 dark:text-gray-400"},jt={key:0,class:"p-8 text-center"},Dt={key:1,class:"p-5"},Ct={class:"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-5"},Pt={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},St={class:"flex items-center justify-between mb-2"},Mt={class:"w-8 h-8 rounded-lg bg-yellow-50 dark:bg-yellow-900/20 flex items-center justify-center"},At={class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"},It={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},Tt={class:"flex items-center justify-between mb-2"},Bt={class:"w-8 h-8 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center"},Et={class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"},Rt={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},Lt={class:"flex items-center justify-between mb-2"},Nt={class:"w-8 h-8 rounded-lg bg-green-50 dark:bg-green-900/20 flex items-center justify-center"},Ot={class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"},Ft={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},zt={class:"flex items-center justify-between mb-2"},Ut={class:"w-8 h-8 rounded-lg bg-red-50 dark:bg-red-900/20 flex items-center justify-center"},Vt={class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"},Wt={key:0,class:"space-y-2"},Gt={class:"text-sm font-medium text-gray-900 dark:text-white"},Jt={class:"text-xs text-gray-500 dark:text-gray-400"},qt={key:0,class:"text-xs text-center text-gray-500 dark:text-gray-400 pt-2"},Kt={key:1,class:"text-center py-6"},Yt={__name:"DashboardPpdbOverview",setup(c){const _=k(!0),n=k(null),s=k({pending:0,inSelection:0,accepted:0,rejected:0}),t=k([]),a=k(0),f=I(()=>Math.max(0,a.value-3)),$=async()=>{var r,u,D,C,m,A,B;try{_.value=!0;const w=sessionStorage.getItem("admin_token"),p=await(await fetch("/api/yasmin-panel/ppdb/dashboard",{headers:{Authorization:`Bearer ${w}`,Accept:"application/json"}})).json();if(p.success){const T=(((r=p.data.wave_stats)==null?void 0:r.filter(M=>M.is_active===!0||M.is_active===1))||[]).sort((M,S)=>(M.order||M.id||0)-(S.order||S.id||0))[0];n.value=T?{name:`${T.name} â€¢ ${T.academic_year}`}:null,s.value={pending:((u=p.data.by_status)==null?void 0:u.pending)||0,inSelection:((D=p.data.by_status)==null?void 0:D.selection)||0,accepted:((C=p.data.by_status)==null?void 0:C.accepted)||0,rejected:((m=p.data.by_status)==null?void 0:m.rejected)||0},t.value=((A=p.data.recent)==null?void 0:A.slice(0,3))||[],a.value=p.data.total||((B=p.data.recent)==null?void 0:B.length)||0}}catch(w){console.error("Failed to fetch PPDB overview:",w)}finally{_.value=!1}},j=r=>{const u={pending:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",verified:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",in_selection:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",accepted:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",rejected:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"};return u[r]||u.pending},d=r=>({pending:"Menunggu",verified:"Terverifikasi",in_selection:"Seleksi",accepted:"Diterima",rejected:"Ditolak"})[r]||"Menunggu";return te($),(r,u)=>{var C;const D=oe("router-link");return i(),g("div",kt,[e("div",ht,[e("div",wt,[e("div",_t,[l(b(he),{class:"w-5 h-5 text-blue-600 dark:text-blue-400"})]),e("div",null,[u[0]||(u[0]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white font-poppins"},"PPDB Overview",-1)),e("p",$t,o(((C=n.value)==null?void 0:C.name)||"Tidak ada gelombang aktif"),1)])]),l(D,{to:"/yasmin-panel/ppdb",class:"text-sm font-medium text-blue-600 dark:text-blue-400 hover:underline font-poppins flex items-center gap-1"},{default:J(()=>[u[1]||(u[1]=R(" Detail ",-1)),l(b(de),{class:"w-4 h-4"})]),_:1})]),_.value?(i(),g("div",jt,[...u[2]||(u[2]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1)])])):(i(),g("div",Dt,[e("div",Ct,[e("div",Pt,[e("div",St,[e("div",Mt,[l(b(ie),{class:"w-4 h-4 text-yellow-600 dark:text-yellow-400"})]),u[3]||(u[3]=e("span",{class:"text-xs font-medium text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/20 px-2 py-0.5 rounded-full"},"Pending",-1))]),e("h3",At,o(s.value.pending),1)]),e("div",It,[e("div",Tt,[e("div",Bt,[l(b(we),{class:"w-4 h-4 text-blue-600 dark:text-blue-400"})]),u[4]||(u[4]=e("span",{class:"text-xs font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-2 py-0.5 rounded-full"},"Proses",-1))]),e("h3",Et,o(s.value.inSelection),1)]),e("div",Rt,[e("div",Lt,[e("div",Nt,[l(b(ue),{class:"w-4 h-4 text-green-600 dark:text-green-400"})]),u[5]||(u[5]=e("span",{class:"text-xs font-medium text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 px-2 py-0.5 rounded-full"},"Diterima",-1))]),e("h3",Ot,o(s.value.accepted),1)]),e("div",Ft,[e("div",zt,[e("div",Ut,[l(b(ce),{class:"w-4 h-4 text-red-600 dark:text-red-400"})]),u[6]||(u[6]=e("span",{class:"text-xs font-medium text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-2 py-0.5 rounded-full"},"Ditolak",-1))]),e("h3",Vt,o(s.value.rejected),1)])]),e("div",null,[u[8]||(u[8]=e("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},"Pendaftar Terbaru",-1)),t.value.length?(i(),g("div",Wt,[(i(!0),g(L,null,z(t.value,m=>(i(),g("div",{key:m.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},[e("div",null,[e("p",Gt,o(m.nama_lengkap),1),e("p",Jt,o(m.registration_number),1)]),e("span",{class:Y([j(m.status),"px-2 py-1 text-xs font-medium rounded-full"])},o(d(m.status)),3)]))),128)),f.value>0?(i(),g("p",qt," dan "+o(f.value)+" pendaftar lainnya ",1)):E("",!0)])):(i(),g("div",Kt,[l(b(ge),{class:"w-8 h-8 text-gray-300 dark:text-gray-600 mx-auto mb-2"}),u[7]||(u[7]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Tidak ada pendaftar",-1))]))])]))])}}},Ht=F(Yt,[["__scopeId","data-v-b85bc911"]]),Xt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},Qt={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow duration-300"},Zt={class:"flex items-center justify-between mb-4"},ea={class:"w-12 h-12 rounded-xl bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center"},ta={class:"text-3xl font-bold text-gray-900 dark:text-white mb-1 font-poppins"},aa={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow duration-300"},sa={class:"flex items-center justify-between mb-4"},ra={class:"w-12 h-12 rounded-xl bg-emerald-50 dark:bg-emerald-900/20 flex items-center justify-center"},na={class:"text-3xl font-bold text-gray-900 dark:text-white mb-1 font-poppins"},oa={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow duration-300"},la={class:"flex items-center justify-between mb-4"},da={class:"w-12 h-12 rounded-xl bg-purple-50 dark:bg-purple-900/20 flex items-center justify-center"},ia={class:"text-3xl font-bold text-gray-900 dark:text-white mb-1 font-poppins"},ua={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow duration-300"},ca={class:"flex items-center justify-between mb-4"},ga={class:"w-12 h-12 rounded-xl bg-yellow-50 dark:bg-yellow-900/20 flex items-center justify-center"},pa={class:"text-3xl font-bold text-gray-900 dark:text-white mb-1 font-poppins"},ba={__name:"DashboardStats",props:{stats:{type:Object,required:!0}},setup(c){return(_,n)=>(i(),g("div",Xt,[e("div",Qt,[e("div",Zt,[e("div",ea,[l(b(_e),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),n[0]||(n[0]=e("span",{class:"text-xs font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-3 py-1 rounded-full"},"Terpublikasi",-1))]),e("h3",ta,o(c.stats.berita),1),n[1]||(n[1]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Total Berita",-1))]),e("div",aa,[e("div",sa,[e("div",ra,[l(b(le),{class:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})]),n[2]||(n[2]=e("span",{class:"text-xs font-medium text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-3 py-1 rounded-full"},"Aktif",-1))]),e("h3",na,o(c.stats.ekskul),1),n[3]||(n[3]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Ekstrakurikuler",-1))]),e("div",oa,[e("div",la,[e("div",da,[l(b($e),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})]),n[4]||(n[4]=e("span",{class:"text-xs font-medium text-purple-600 dark:text-purple-400 bg-purple-50 dark:bg-purple-900/20 px-3 py-1 rounded-full"},"Foto",-1))]),e("h3",ia,o(c.stats.galeri),1),n[5]||(n[5]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Foto Galeri",-1))]),e("div",ua,[e("div",ca,[e("div",ga,[l(b(je),{class:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})]),n[6]||(n[6]=e("span",{class:"text-xs font-medium text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/20 px-3 py-1 rounded-full"},"Pencapaian",-1))]),e("h3",pa,o(c.stats.prestasi),1),n[7]||(n[7]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-poppins"},"Total Prestasi",-1))])]))}},xa=F(ba,[["__scopeId","data-v-e94eb49c"]]),fa={class:"fixed inset-0 bg-black/50 z-[60] flex items-center justify-center p-4"},ya={class:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md shadow-xl"},ma={class:"flex items-center justify-between p-5 border-b border-gray-200 dark:border-gray-700"},va={class:"flex gap-2"},ka=["onClick"],ha={class:"flex gap-3 pt-2"},wa=["disabled"],_a={__name:"AddEventModal",props:{selectedDate:{type:String,default:null}},emits:["close","saved"],setup(c,{emit:_}){const n=c,s=_,t=k(!1),a=me({title:"",event_date:n.selectedDate||new Date().toISOString().split("T")[0],event_time:"",color:"blue",description:""}),f=[{value:"blue",class:"bg-blue-500"},{value:"green",class:"bg-green-500"},{value:"red",class:"bg-red-500"},{value:"yellow",class:"bg-yellow-500"},{value:"purple",class:"bg-purple-500"},{value:"orange",class:"bg-orange-500"}],$=async()=>{t.value=!0;try{const j={title:a.title,event_date:a.event_date,color:a.color,description:a.description||null,event_time:a.event_time||null},d=await O.post("/yasmin-panel/calendar/events",j);d.data.success&&s("saved",d.data.data)}catch(j){console.error("Failed to save event:",j),alert("Gagal menyimpan event")}finally{t.value=!1}};return(j,d)=>(i(),g("div",fa,[e("div",ya,[e("div",ma,[d[6]||(d[6]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white font-poppins"},"Tambah Event",-1)),e("button",{onClick:d[0]||(d[0]=r=>j.$emit("close")),class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700"},[l(b(H),{class:"w-5 h-5 text-gray-500"})])]),e("form",{onSubmit:Z($,["prevent"]),class:"p-5 space-y-4"},[e("div",null,[d[7]||(d[7]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Judul Event *",-1)),V(e("input",{"onUpdate:modelValue":d[1]||(d[1]=r=>a.title=r),type:"text",required:"",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Contoh: Deadline PPDB Gel 1"},null,512),[[W,a.title]])]),e("div",null,[d[8]||(d[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tanggal *",-1)),V(e("input",{"onUpdate:modelValue":d[2]||(d[2]=r=>a.event_date=r),type:"date",required:"",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"},null,512),[[W,a.event_date]])]),e("div",null,[d[9]||(d[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Waktu (Opsional)",-1)),V(e("input",{"onUpdate:modelValue":d[3]||(d[3]=r=>a.event_time=r),type:"time",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"},null,512),[[W,a.event_time]])]),e("div",null,[d[10]||(d[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Warna",-1)),e("div",va,[(i(),g(L,null,z(f,r=>e("button",{key:r.value,type:"button",onClick:u=>a.color=r.value,class:Y(["w-8 h-8 rounded-full transition-all",r.class,a.color===r.value?"ring-2 ring-offset-2 ring-gray-400 scale-110":""])},null,10,ka)),64))])]),e("div",null,[d[11]||(d[11]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Deskripsi (Opsional)",-1)),V(e("textarea",{"onUpdate:modelValue":d[4]||(d[4]=r=>a.description=r),rows:"2",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none",placeholder:"Catatan tambahan..."},null,512),[[W,a.description]])]),e("div",ha,[e("button",{type:"button",onClick:d[5]||(d[5]=r=>j.$emit("close")),class:"flex-1 px-4 py-2.5 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Batal "),e("button",{type:"submit",disabled:t.value,class:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium transition-colors disabled:opacity-50"},o(t.value?"Menyimpan...":"Simpan"),9,wa)])],32)])]))}},$a=F(_a,[["__scopeId","data-v-f2198572"]]),ja={key:0,class:"fixed right-0 top-[40px] h-[calc(100vh-40px)] w-[400px] bg-white dark:bg-gray-800 shadow-2xl z-40 flex flex-col border-l border-gray-200 dark:border-gray-700"},Da={class:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700"},Ca={class:"flex items-center gap-3"},Pa={class:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center"},Sa={class:"p-5 border-b border-gray-200 dark:border-gray-700"},Ma={class:"flex items-center justify-between mb-4"},Aa={class:"text-sm font-semibold text-gray-900 dark:text-white font-poppins"},Ia={class:"grid grid-cols-7 gap-1 mb-2"},Ta={class:"grid grid-cols-7 gap-1"},Ba=["onClick","disabled"],Ea={key:0,class:"absolute bottom-1 left-1/2 -translate-x-1/2 w-1.5 h-1.5 rounded-full bg-red-500"},Ra={class:"flex-1 overflow-y-auto p-5"},La={class:"flex items-center justify-between mb-4"},Na={class:"text-sm font-semibold text-gray-900 dark:text-white font-poppins flex items-center gap-2"},Oa={key:0,class:"space-y-2"},Fa={class:"flex items-start justify-between"},za={class:"flex-1"},Ua={class:"flex items-center gap-2"},Va={class:"text-sm font-medium text-gray-900 dark:text-white"},Wa={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Ga={key:0},Ja=["onClick"],qa={key:1,class:"text-center py-8"},Ka={__name:"CalendarSidebar",props:{isOpen:{type:Boolean,default:!1}},emits:["close"],setup(c,{emit:_}){const n=c,s=k(new Date().getMonth()),t=k(new Date().getFullYear()),a=k([]),f=k(null),$=k(!1),j={blue:"bg-blue-500",green:"bg-green-500",red:"bg-red-500",yellow:"bg-yellow-500",purple:"bg-purple-500",orange:"bg-orange-500"},d=I(()=>`${["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][s.value]} ${t.value}`),r=I(()=>{const v=[],p=new Date(t.value,s.value,1),y=new Date(t.value,s.value+1,0),T=new Date;let M=p.getDay()-1;M<0&&(M=6);for(let S=0;S<M;S++)v.push({day:"",date:null});for(let S=1;S<=y.getDate();S++){const q=new Date(t.value,s.value,S),U=q.toISOString().split("T")[0];v.push({day:S,date:U,isToday:q.toDateString()===T.toDateString(),isSelected:U===f.value,hasEvent:a.value.some(x=>x.event_date===U)})}return v}),u=()=>{s.value===0?(s.value=11,t.value--):s.value--},D=()=>{s.value===11?(s.value=0,t.value++):s.value++},C=v=>{f.value=v,$.value=!0},m=async()=>{try{const v=await O.get("/yasmin-panel/calendar/events",{params:{month:s.value+1,year:t.value}});v.data.success&&(a.value=v.data.data)}catch(v){console.error("Failed to fetch events:",v)}},A=async v=>{if(confirm("Hapus event ini?"))try{await O.delete(`/yasmin-panel/calendar/events/${v}`),a.value=a.value.filter(p=>p.id!==v)}catch(p){console.error("Failed to delete event:",p)}},B=v=>{a.value.push(v),$.value=!1},w=v=>new Date(v).toLocaleDateString("id-ID",{day:"numeric",month:"short"});return G([s,t],m),G(()=>n.isOpen,v=>{v&&m()}),te(()=>{n.isOpen&&m()}),(v,p)=>(i(),K(ee,{name:"slide"},{default:J(()=>[c.isOpen?(i(),g("div",ja,[e("div",Da,[e("div",Ca,[e("div",Pa,[l(b(ne),{class:"w-5 h-5 text-blue-600 dark:text-blue-400"})]),p[3]||(p[3]=e("h2",{class:"text-lg font-bold text-gray-900 dark:text-white font-poppins"},"Kalender",-1))]),e("button",{onClick:p[0]||(p[0]=y=>v.$emit("close")),class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[l(b(H),{class:"w-5 h-5 text-gray-500"})])]),e("div",Sa,[e("div",Ma,[e("button",{onClick:u,class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[l(b(De),{class:"w-5 h-5 text-gray-600 dark:text-gray-300"})]),e("h3",Aa,o(d.value),1),e("button",{onClick:D,class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[l(b(Ce),{class:"w-5 h-5 text-gray-600 dark:text-gray-300"})])]),e("div",Ia,[(i(),g(L,null,z(["Sen","Sel","Rab","Kam","Jum","Sab","Min"],y=>e("div",{key:y,class:"text-center text-xs font-medium text-gray-500 dark:text-gray-400 py-1"},o(y),1)),64))]),e("div",Ta,[(i(!0),g(L,null,z(r.value,(y,T)=>(i(),g("button",{key:T,onClick:M=>y.date&&C(y.date),class:Y(["relative h-9 rounded-lg text-sm font-medium transition-colors",y.date?"hover:bg-blue-50 dark:hover:bg-blue-900/20 cursor-pointer":"cursor-default",y.isToday?"bg-blue-600 text-white hover:bg-blue-700":"text-gray-700 dark:text-gray-300",y.isSelected?"ring-2 ring-blue-500":""]),disabled:!y.date},[R(o(y.day)+" ",1),y.hasEvent?(i(),g("span",Ea)):E("",!0)],10,Ba))),128))])]),e("div",Ra,[e("div",La,[e("h3",Na,[l(b(Pe),{class:"w-4 h-4"}),p[4]||(p[4]=R(" Agenda ",-1))]),e("button",{onClick:p[1]||(p[1]=y=>$.value=!0),class:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-xs font-medium rounded-lg transition-colors flex items-center gap-1"},[l(b(Se),{class:"w-3 h-3"}),p[5]||(p[5]=R(" Tambah ",-1))])]),a.value.length?(i(),g("div",Oa,[(i(!0),g(L,null,z(a.value,y=>(i(),g("div",{key:y.id,class:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg group"},[e("div",Fa,[e("div",za,[e("div",Ua,[e("span",{class:Y(["w-2 h-2 rounded-full",j[y.color]||"bg-blue-500"])},null,2),e("p",Va,o(y.title),1)]),e("p",Wa,[R(o(w(y.event_date))+" ",1),y.event_time?(i(),g("span",Ga," â€¢ "+o(y.event_time),1)):E("",!0)])]),e("button",{onClick:T=>A(y.id),class:"p-1 opacity-0 group-hover:opacity-100 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-all"},[l(b(Me),{class:"w-4 h-4 text-red-500"})],8,Ja)])]))),128))])):(i(),g("div",qa,[l(b(ne),{class:"w-10 h-10 text-gray-300 dark:text-gray-600 mx-auto mb-2"}),p[6]||(p[6]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Tidak ada agenda bulan ini",-1))]))]),$.value?(i(),K($a,{key:0,"selected-date":f.value,onClose:p[2]||(p[2]=y=>$.value=!1),onSaved:B},null,8,["selected-date"])):E("",!0)])):E("",!0)]),_:1}))}},Ya=F(Ka,[["__scopeId","data-v-d3695c70"]]),Ha={class:"space-y-6"},Xa={key:0,class:"flex flex-col items-center justify-center min-h-[400px]"},Qa={class:"flex items-start justify-between mb-2"},Za={class:"text-base font-semibold text-gray-900 dark:text-white font-poppins"},es={class:"text-sm text-gray-500 dark:text-gray-400 font-poppins"},ts={class:"text-base font-semibold text-gray-900 dark:text-white font-poppins"},as={class:"text-sm text-gray-500 dark:text-gray-400 font-poppins"},ss={class:"grid grid-cols-1 lg:grid-cols-5 gap-6"},rs={class:"lg:col-span-3"},ns={class:"lg:col-span-2"},os={__name:"Dashboard",setup(c){const{showSuccess:_,showError:n,showWarning:s,confirm:t}=fe(),a=Ae(),f=k(!1),$=I(()=>JSON.parse(sessionStorage.getItem("admin_user")||"{}").name||"Admin"),j=I(()=>{const x=JSON.parse(sessionStorage.getItem("admin_user")||"{}");return{super_admin:"Super Admin",admin:"Admin",admin_ppdb:"Admin PPDB"}[x.role]||"Admin"}),d=I(()=>{const x=new Date().getHours();return x<11?"Selamat pagi":x<15?"Selamat siang":x<18?"Selamat sore":"Selamat malam"}),r=k(new Date);let u=null;const D=I(()=>{const x={day:"numeric",month:"long",year:"numeric"};return r.value.toLocaleDateString("id-ID",x)}),C=I(()=>{const x=r.value.getHours().toString().padStart(2,"0"),h=r.value.getMinutes().toString().padStart(2,"0"),P=r.value.getSeconds().toString().padStart(2,"0");return`${x}.${h}.${P}`}),m=k({berita:0,ekskul:0,galeri:0,prestasi:0,pendaftar_pending:0,pendaftar_approved:0,pendaftar_rejected:0}),A=k(!1),B=k(!1),w=k(null),v=k(""),p=(x,h)=>{const P=m.value[x]||0,N=Math.abs(h-P);if(N<=2){m.value[x]=h;return}const X=500,Q=Math.min(N,10),pe=(h-P)/Q;let ae=P,se=0;const be=setInterval(()=>{se++,ae+=pe,se>=Q?(m.value[x]=h,clearInterval(be)):m.value[x]=Math.round(ae)},X/Q)};G(()=>a.stats,x=>{Object.keys(x).forEach(h=>{typeof x[h]=="number"&&p(h,x[h])})},{deep:!0,immediate:!0}),te(()=>{a.startPolling(),u=setInterval(()=>{r.value=new Date},1e3)}),ve(()=>{a.stopPolling(),u&&clearInterval(u)});const y=async x=>{var P,N;if((await t("Approve Pendaftaran?","Pendaftar akan diterima di ekstrakurikuler ini","Ya, Approve")).isConfirmed)try{await O.put(`/yasmin-panel/ekstrakurikuler/registrations/${x}/approve`,{admin_notes:"Approved from dashboard"}),await _("Berhasil!","Pendaftaran telah diapprove"),a.fetchAll()}catch(X){await n("Gagal!",((N=(P=X.response)==null?void 0:P.data)==null?void 0:N.message)||"Gagal approve pendaftaran")}},T=async x=>{w.value=a.recentPendaftar.find(h=>h.id===x),B.value=!0},M=async x=>{var h,P;if(!x.trim()){await s("Perhatian!","Alasan penolakan harus diisi");return}try{await O.put(`/yasmin-panel/ekstrakurikuler/registrations/${w.value.id}/reject`,{admin_notes:x.trim()}),S(),await _("Berhasil!","Pendaftaran telah ditolak"),a.fetchAll()}catch(N){await n("Gagal!",((P=(h=N.response)==null?void 0:h.data)==null?void 0:P.message)||"Gagal reject pendaftaran")}},S=()=>{B.value=!1,v.value="",w.value=null},q=()=>{A.value=!1,y(w.value.id)},U=()=>{A.value=!1,T(w.value.id)};return(x,h)=>(i(),g("div",Ha,[b(a).isInitialLoading?(i(),g("div",Xa,[l(xe,{size:"lg",color:"blue"})])):(i(),g(L,{key:1},[e("div",Qa,[e("div",null,[e("h1",Za,o(d.value)+", "+o($.value)+"! ðŸ‘‹ ",1),e("p",es,"sebagai "+o(j.value),1)]),e("div",{class:"text-right cursor-pointer hover:opacity-75 transition-opacity",onClick:h[0]||(h[0]=P=>f.value=!0),title:"Buka Kalender"},[e("p",ts,o(D.value),1),e("p",as,o(C.value),1)])]),l(xa,{stats:m.value},null,8,["stats"]),e("div",ss,[e("div",rs,[l(Ht)]),e("div",ns,[l(vt,{items:b(a).recentPendaftar,"pending-count":m.value.pendaftar_pending,"approved-count":m.value.pendaftar_approved||0,"rejected-count":m.value.pendaftar_rejected||0},null,8,["items","pending-count","approved-count","rejected-count"])])]),l(Ke,{"show-reject":B.value,"show-detail":A.value,"selected-pendaftar":w.value,onCloseReject:S,onCloseDetail:h[1]||(h[1]=P=>A.value=!1),onConfirmReject:M,onApproveFromModal:q,onRejectFromModal:U},null,8,["show-reject","show-detail","selected-pendaftar"]),l(Ya,{"is-open":f.value,onClose:h[2]||(h[2]=P=>f.value=!1)},null,8,["is-open"])],64))]))}},us=F(os,[["__scopeId","data-v-b625d620"]]);export{us as default};
