import{a as L,L as xe,c as A}from"./app-F21Gw_vX.js";import{i as u,k as p,l as e,j,t as C,U as F,e as r,u as k,A as Z,F as _,C as se,m as q,g as Y,T as Q,r as g,c as H,w as ie,B as V,O as X,X as ke,o as he}from"./vendor-0BLfaBTW.js";import{an as we,ac as oe,ai as K,r as $e,R as Ce,X as ee,o as Ie,k as Se,ab as Ue,a as De}from"./ui-BH4Jb6j-.js";import{I as je}from"./ImageCropperModal-eOgvD4aF.js";const Ge={key:0,class:"group relative w-full h-full"},Be=["src","alt"],Pe={class:"absolute top-2 left-2 z-10"},Fe={class:"px-2 py-1 text-xs font-bold text-white bg-purple-600 rounded-lg font-poppins shadow-lg"},Ee={key:0,class:"absolute top-2 right-2 z-10"},Ae={class:"absolute inset-0 bg-black/0 group-hover:bg-black/60 transition-all duration-300 flex items-center justify-center gap-2"},Me={class:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent"},Ne={class:"text-white font-bold text-sm font-poppins line-clamp-1"},Re={key:0,class:"text-gray-200 text-xs font-poppins line-clamp-1 mt-1"},Le={key:1,class:"flex flex-col items-center justify-center h-full bg-purple-50 dark:bg-purple-900/10 hover:bg-purple-100 dark:hover:bg-purple-900/20 transition-colors"},Te={key:0,class:"flex flex-col items-center"},ze={key:1,class:"flex flex-col items-center"},Oe={class:"w-16 h-16 rounded-full bg-purple-100 dark:bg-purple-800 flex items-center justify-center mb-3"},Ve={class:"text-sm font-bold text-purple-700 dark:text-purple-300 font-poppins mb-1"},qe={key:2,class:"flex flex-col items-center justify-center h-full bg-gray-50 dark:bg-gray-800/50"},He={class:"w-16 h-16 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center mb-3"},Ke={class:"text-sm font-bold text-gray-500 dark:text-gray-400 font-poppins mb-1"},Je={__name:"GridSlot",props:{slotNumber:{type:Number,required:!0},gallery:{type:Object,default:null},isAvailable:{type:Boolean,default:!1},isUploading:{type:Boolean,default:!1},spanClass:{type:String,default:"col-span-1"}},emits:["upload","edit","delete"],setup(t,{emit:n}){const a=t,i=n,c=()=>{!a.gallery&&a.isAvailable&&!a.isUploading&&i("upload")};return(o,x)=>(p(),u("div",{class:Z([t.spanClass,"relative rounded-2xl overflow-hidden border-2 transition-all duration-300","h-[342px]",t.gallery?"border-gray-200 dark:border-gray-700 hover:shadow-xl":t.isAvailable?"border-dashed border-purple-400 dark:border-purple-600 hover:border-purple-500 dark:hover:border-purple-500 cursor-pointer":"border-dashed border-gray-300 dark:border-gray-600 opacity-50 cursor-not-allowed"]),onClick:c},[t.gallery?(p(),u("div",Ge,[e("img",{src:t.gallery.image_url,alt:t.gallery.title,class:"w-full h-full object-cover"},null,8,Be),e("div",Pe,[e("span",Fe," Slot "+C(t.slotNumber),1)]),t.gallery.is_active?j("",!0):(p(),u("div",Ee,[...x[2]||(x[2]=[e("span",{class:"px-2 py-1 text-xs font-bold text-white bg-red-500 rounded-lg font-poppins shadow-lg"}," Inactive ",-1)])])),e("div",Ae,[e("button",{onClick:x[0]||(x[0]=F(I=>o.$emit("edit",t.gallery),["stop"])),class:"opacity-0 group-hover:opacity-100 scale-0 group-hover:scale-100 transition-all duration-300 p-3 bg-blue-500/90 rounded-xl hover:bg-blue-600 backdrop-blur-sm",title:"Edit"},[r(k(we),{class:"w-5 h-5 text-white"})]),e("button",{onClick:x[1]||(x[1]=F(I=>o.$emit("delete",t.gallery),["stop"])),class:"opacity-0 group-hover:opacity-100 scale-0 group-hover:scale-100 transition-all duration-300 delay-50 p-3 bg-red-500/90 rounded-xl hover:bg-red-600 backdrop-blur-sm",title:"Hapus"},[r(k(oe),{class:"w-5 h-5 text-white"})])]),e("div",Me,[e("p",Ne,C(t.gallery.title),1),t.gallery.description?(p(),u("p",Re,C(t.gallery.description),1)):j("",!0)])])):t.isAvailable?(p(),u("div",Le,[t.isUploading?(p(),u("div",Te,[r(xe,{size:"lg",color:"purple",text:"Uploading..."})])):(p(),u("div",ze,[e("div",Oe,[r(k(K),{class:"w-8 h-8 text-purple-600 dark:text-purple-400"})]),e("p",Ve," Slot "+C(t.slotNumber),1),x[3]||(x[3]=e("p",{class:"text-xs text-purple-600 dark:text-purple-400 font-poppins"},"Klik untuk upload",-1))]))])):(p(),u("div",qe,[e("div",He,[r(k($e),{class:"w-8 h-8 text-gray-400"})]),e("p",Ke," Slot "+C(t.slotNumber),1),x[4]||(x[4]=e("p",{class:"text-xs text-gray-400 dark:text-gray-500 font-poppins text-center px-4"}," Lengkapi baris sebelumnya ",-1))]))],2))}},R=L(Je,[["__scopeId","data-v-4741cd8d"]]),We={key:0,class:"grid grid-cols-2 lg:grid-cols-4 gap-6"},Xe={key:1,class:"grid grid-cols-2 lg:grid-cols-4 gap-6"},Ye={__name:"GaleriGrid",props:{loading:Boolean,galleries:{type:Array,required:!0},availableSlots:{type:Object,required:!0},uploadingSlot:{type:Number,default:null}},emits:["upload","edit","delete"],setup(t){return(n,a)=>t.loading?(p(),u("div",We,[(p(),u(_,null,se(9,i=>e("div",{key:i,class:Z(["skeleton-shimmer rounded-2xl overflow-hidden",[1,2,8].includes(i)?"col-span-2":"col-span-1"]),style:{height:"342px"}},[...a[17]||(a[17]=[e("div",{class:"shimmer-effect"},null,-1)])],2)),64))])):(p(),u("div",Xe,[r(R,{"slot-number":1,gallery:t.galleries[0],"is-available":t.availableSlots[1],"is-uploading":t.uploadingSlot===1,"span-class":"col-span-2",onUpload:a[0]||(a[0]=i=>n.$emit("upload",1)),onEdit:a[1]||(a[1]=i=>n.$emit("edit",i)),onDelete:a[2]||(a[2]=i=>n.$emit("delete",i))},null,8,["gallery","is-available","is-uploading"]),r(R,{"slot-number":2,gallery:t.galleries[1],"is-available":t.availableSlots[2],"is-uploading":t.uploadingSlot===2,"span-class":"col-span-2",onUpload:a[3]||(a[3]=i=>n.$emit("upload",2)),onEdit:a[4]||(a[4]=i=>n.$emit("edit",i)),onDelete:a[5]||(a[5]=i=>n.$emit("delete",i))},null,8,["gallery","is-available","is-uploading"]),(p(),u(_,null,se([3,4,5,6],i=>r(R,{key:i,"slot-number":i,gallery:t.galleries[i-1],"is-available":t.availableSlots[i],"is-uploading":t.uploadingSlot===i,"span-class":"col-span-1",onUpload:c=>n.$emit("upload",i),onEdit:a[6]||(a[6]=c=>n.$emit("edit",c)),onDelete:a[7]||(a[7]=c=>n.$emit("delete",c))},null,8,["slot-number","gallery","is-available","is-uploading","onUpload"])),64)),r(R,{"slot-number":7,gallery:t.galleries[6],"is-available":t.availableSlots[7],"is-uploading":t.uploadingSlot===7,"span-class":"col-span-1",onUpload:a[8]||(a[8]=i=>n.$emit("upload",7)),onEdit:a[9]||(a[9]=i=>n.$emit("edit",i)),onDelete:a[10]||(a[10]=i=>n.$emit("delete",i))},null,8,["gallery","is-available","is-uploading"]),r(R,{"slot-number":8,gallery:t.galleries[7],"is-available":t.availableSlots[8],"is-uploading":t.uploadingSlot===8,"span-class":"col-span-2",onUpload:a[11]||(a[11]=i=>n.$emit("upload",8)),onEdit:a[12]||(a[12]=i=>n.$emit("edit",i)),onDelete:a[13]||(a[13]=i=>n.$emit("delete",i))},null,8,["gallery","is-available","is-uploading"]),r(R,{"slot-number":9,gallery:t.galleries[8],"is-available":t.availableSlots[9],"is-uploading":t.uploadingSlot===9,"span-class":"col-span-1",onUpload:a[14]||(a[14]=i=>n.$emit("upload",9)),onEdit:a[15]||(a[15]=i=>n.$emit("edit",i)),onDelete:a[16]||(a[16]=i=>n.$emit("delete",i))},null,8,["gallery","is-available","is-uploading"])]))}},Qe=L(Ye,[["__scopeId","data-v-b75c0d21"]]),Ze={class:"flex items-center justify-between"},_e=["disabled"],et={__name:"GaleriHeader",props:{loading:Boolean},emits:["refresh"],setup(t){return(n,a)=>(p(),u("div",Ze,[a[2]||(a[2]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white font-poppins"}," Galeri Homepage "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Kelola 9 slot galeri untuk tampilan homepage ")],-1)),e("button",{onClick:a[0]||(a[0]=i=>n.$emit("refresh")),disabled:t.loading,class:"flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-400 text-white rounded-xl font-medium transition-colors duration-200 shadow-lg hover:shadow-xl font-poppins disabled:opacity-50"},[r(k(Ce),{class:Z(["w-5 h-5",{"animate-spin":t.loading}])},null,8,["class"]),a[1]||(a[1]=q(" Refresh ",-1))],8,_e)]))}},tt=L(et,[["__scopeId","data-v-cf21ad1a"]]),lt={class:"space-y-4"},at={class:"font-medium font-poppins"},st={class:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-4"},it={class:"flex items-start gap-3"},ot={__name:"GaleriInfoBox",props:{alert:{type:Object,default:()=>({show:!1,type:"success",text:""})}},emits:["close-alert"],setup(t){return(n,a)=>(p(),u("div",lt,[r(Q,{"enter-active-class":"transition-all duration-300","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:Y(()=>[t.alert.show?(p(),u("div",{key:0,class:Z([t.alert.type==="success"?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200","border rounded-2xl p-4 flex items-center justify-between"])},[e("p",at,C(t.alert.text),1),e("button",{onClick:a[0]||(a[0]=i=>n.$emit("close-alert")),class:"text-current opacity-70 hover:opacity-100"},[r(k(ee),{class:"w-5 h-5"})])],2)):j("",!0)]),_:1}),e("div",st,[e("div",it,[r(k(Ie),{class:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),a[1]||(a[1]=e("div",{class:"text-sm text-blue-800 dark:text-blue-200"},[e("p",{class:"font-semibold mb-1"},"Aturan Upload Sequential:"),e("ul",{class:"list-disc list-inside space-y-1 text-blue-700 dark:text-blue-300"},[e("li",null,"Baris 1 (Slot 1 & 2) harus diisi terlebih dahulu"),e("li",null,"Baris 2 (Slot 3, 4, 5, 6) bisa diisi setelah Baris 1 penuh"),e("li",null,"Baris 3 (Slot 7, 8, 9) bisa diisi setelah Baris 2 penuh")])],-1))])])]))}},rt=L(ot,[["__scopeId","data-v-b219f026"]]),nt={class:"relative flex items-center gap-2"},dt={key:1,class:"w-10"},ut={class:"flex items-center justify-between mb-6"},pt={class:"text-xl font-bold text-gray-900 dark:text-white font-poppins"},gt={class:"text-sm text-gray-500"},vt={class:"relative aspect-video rounded-xl overflow-hidden bg-gray-100 dark:bg-gray-900"},ct=["src"],mt={key:0,class:"absolute top-2 left-2 px-2 py-1 bg-green-500 text-white text-xs rounded-full font-medium"},bt={class:"text-center text-white"},ft={key:0,class:"flex items-center gap-3"},yt={class:"flex flex-col gap-2 pt-2"},xt={class:"flex gap-3 pt-2"},kt=["disabled"],ht={key:3,class:"w-10"},wt={class:"flex items-center justify-between mb-6"},$t={class:"text-xl font-bold text-gray-900 dark:text-white font-poppins"},Ct={key:0,class:"relative aspect-video rounded-xl overflow-hidden"},It=["src"],St={class:"flex gap-3 pt-4"},Ut=["disabled"],Dt={__name:"GaleriModals",props:{showEdit:Boolean,showUpload:Boolean,editData:Object,uploadData:Object,selectedSlot:Number,saving:Boolean,uploading:Boolean,newImagePreview:String,newImageBlob:Object},emits:["close-edit","close-upload","save-edit","submit-upload","replace-image","select-file","add-image","delete-image","select-new-image","save-new-image","cancel-add-image","update-current-image"],setup(t,{emit:n}){const a=t,i=n,c=g(0),o=g(!1),x=g("slide-left"),I=g(""),D=g(""),U=H(()=>{var v;return((v=a.editData)==null?void 0:v.all_images)||[]}),w=H(()=>U.value.length),S=H(()=>U.value[c.value]||null),G=H(()=>{var v;return o.value?a.newImagePreview:((v=S.value)==null?void 0:v.image_url)||null}),N=()=>{h(),x.value="slide-right",c.value>0&&c.value--,B()},T=()=>{h(),x.value="slide-left",c.value<U.value.length-1&&c.value++,B()},B=()=>{S.value&&(I.value=S.value.title||"",D.value=S.value.description||"")},h=()=>{!o.value&&S.value&&i("update-current-image",{id:S.value.id,title:I.value,description:D.value})},m=()=>{w.value>=3||(h(),o.value=!0,I.value="",D.value="",i("add-image"))},E=()=>{o.value=!1,B(),i("cancel-add-image")},P=()=>{o.value?i("save-new-image",{title:I.value,description:D.value}):(h(),i("save-edit"))},J=()=>{o.value?i("select-new-image"):i("replace-image")},b=()=>{o.value=!1,i("close-edit")};return ie(()=>a.showEdit,v=>{v&&(c.value=0,o.value=!1,B())}),ie(()=>U.value,()=>{c.value>=U.value.length&&(c.value=Math.max(0,U.value.length-1)),U.value.length>=3&&o.value&&(o.value=!1),B()},{deep:!0}),(v,s)=>(p(),u(_,null,[r(Q,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","leave-active-class":"transition-opacity duration-200","leave-to-class":"opacity-0"},{default:Y(()=>[t.showEdit?(p(),u("div",{key:0,onClick:b,class:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4"},[e("div",nt,[w.value>1&&!o.value&&c.value>0?(p(),u("button",{key:0,type:"button",onClick:F(N,["stop"]),class:"w-10 h-10 flex items-center justify-center bg-white dark:bg-gray-800 rounded-full shadow-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[r(k(Se),{class:"w-6 h-6 text-gray-700 dark:text-gray-300"})])):(p(),u("div",dt)),e("div",{onClick:s[5]||(s[5]=F(()=>{},["stop"])),class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-[28rem] max-w-[calc(100vw-120px)] shadow-2xl"},[e("div",ut,[e("div",null,[e("h2",pt,C(o.value?"Tambah Foto Baru":"Edit")+" Slot "+C(t.editData.grid_position),1),e("p",gt,C(o.value?`Foto ke-${w.value+1} dari 3`:`Foto ${c.value+1} dari ${w.value}`),1)]),e("button",{onClick:b,class:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},[r(k(ee),{class:"w-5 h-5 text-gray-500"})])]),e("form",{onSubmit:F(P,["prevent"]),class:"space-y-4"},[e("div",vt,[r(Q,{name:x.value,mode:"out-in"},{default:Y(()=>[G.value?(p(),u("div",{key:G.value,class:"absolute inset-0"},[e("img",{src:G.value,alt:"Preview",class:"w-full h-full object-cover"},null,8,ct),o.value&&t.newImagePreview?(p(),u("div",mt," âœ“ Gambar baru ")):j("",!0),e("button",{type:"button",onClick:J,class:"absolute inset-0 bg-black/50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center"},[e("div",bt,[r(k(K),{class:"w-8 h-8 mx-auto mb-2"}),s[15]||(s[15]=e("p",{class:"text-sm font-medium"},"Ganti Gambar",-1))])])])):j("",!0)]),_:1},8,["name"]),G.value?j("",!0):(p(),u("div",{key:0,onClick:J,class:"w-full h-full flex flex-col items-center justify-center cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors"},[r(k(K),{class:"w-12 h-12 text-gray-400 mb-3"}),s[16]||(s[16]=e("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Klik untuk pilih gambar",-1)),s[17]||(s[17]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"PNG, JPG, WEBP (max 2MB)",-1))]))]),e("div",null,[s[18]||(s[18]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 font-poppins"},[q(" Judul "),e("span",{class:"text-red-500"},"*")],-1)),V(e("input",{"onUpdate:modelValue":s[0]||(s[0]=f=>I.value=f),type:"text",required:"",class:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Masukkan judul foto"},null,512),[[X,I.value]])]),e("div",null,[s[19]||(s[19]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 font-poppins"},"Deskripsi",-1)),V(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=f=>D.value=f),rows:"2",class:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",placeholder:"Masukkan deskripsi (opsional)"},null,512),[[X,D.value]])]),o.value?j("",!0):(p(),u("div",ft,[V(e("input",{"onUpdate:modelValue":s[2]||(s[2]=f=>t.editData.is_active=f),type:"checkbox",id:"is_active_edit",class:"w-5 h-5 text-purple-600 rounded"},null,512),[[ke,t.editData.is_active]]),s[20]||(s[20]=e("label",{for:"is_active_edit",class:"text-sm font-medium text-gray-700 dark:text-gray-300 font-poppins"},"Tampilkan di frontend",-1))])),e("div",yt,[w.value<3&&!o.value?(p(),u("button",{key:0,type:"button",onClick:m,class:"w-full px-4 py-2.5 border-2 border-dashed border-purple-300 dark:border-purple-600 text-purple-600 dark:text-purple-400 rounded-xl font-medium hover:bg-purple-50 dark:hover:bg-purple-900/20 font-poppins flex items-center justify-center gap-2"},[r(k(Ue),{class:"w-4 h-4"}),q(" Tambah Foto ke "+C(w.value+1)+"/3 ",1)])):j("",!0),w.value>1&&!o.value?(p(),u("button",{key:1,type:"button",onClick:s[3]||(s[3]=f=>{var W;return v.$emit("delete-image",(W=S.value)==null?void 0:W.id)}),class:"w-full px-4 py-2.5 border border-red-300 dark:border-red-600 text-red-600 dark:text-red-400 rounded-xl font-medium hover:bg-red-50 dark:hover:bg-red-900/20 font-poppins flex items-center justify-center gap-2"},[r(k(oe),{class:"w-4 h-4"}),s[21]||(s[21]=q(" Hapus Foto Ini ",-1))])):j("",!0),e("div",xt,[e("button",{type:"button",onClick:s[4]||(s[4]=f=>o.value?E():v.$emit("close-edit")),class:"flex-1 px-4 py-2.5 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-gray-700 font-poppins"},C(o.value?"Kembali":"Batal"),1),e("button",{type:"submit",disabled:t.saving||o.value&&!t.newImagePreview,class:"flex-1 px-4 py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-xl font-medium font-poppins disabled:opacity-50"},C(t.saving?"Menyimpan...":"Simpan"),9,kt)])])],32)]),w.value>1&&!o.value&&c.value<w.value-1?(p(),u("button",{key:2,type:"button",onClick:F(T,["stop"]),class:"w-10 h-10 flex items-center justify-center bg-white dark:bg-gray-800 rounded-full shadow-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[r(k(De),{class:"w-6 h-6 text-gray-700 dark:text-gray-300"})])):(p(),u("div",ht))])])):j("",!0)]),_:1}),r(Q,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","leave-active-class":"transition-opacity duration-200","leave-to-class":"opacity-0"},{default:Y(()=>[t.showUpload?(p(),u("div",{key:0,onClick:s[14]||(s[14]=f=>v.$emit("close-upload")),class:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4"},[e("div",{onClick:s[13]||(s[13]=F(()=>{},["stop"])),class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl"},[e("div",wt,[e("h2",$t,"Upload ke Slot "+C(t.selectedSlot),1),e("button",{onClick:s[6]||(s[6]=f=>v.$emit("close-upload")),class:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},[r(k(ee),{class:"w-5 h-5 text-gray-500"})])]),e("form",{onSubmit:s[12]||(s[12]=F(f=>v.$emit("submit-upload"),["prevent"])),class:"space-y-4"},[t.uploadData.imagePreview?(p(),u("div",Ct,[e("img",{src:t.uploadData.imagePreview,alt:"Preview",class:"w-full h-full object-cover"},null,8,It),e("button",{type:"button",onClick:s[7]||(s[7]=f=>v.$emit("select-file")),class:"absolute top-2 right-2 p-2 bg-white/90 dark:bg-gray-800/90 rounded-lg hover:bg-white dark:hover:bg-gray-800"},[r(k(K),{class:"w-4 h-4 text-gray-700 dark:text-gray-300"})])])):(p(),u("div",{key:1,onClick:s[8]||(s[8]=f=>v.$emit("select-file")),class:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-8 text-center hover:border-purple-500 cursor-pointer"},[r(k(K),{class:"w-12 h-12 text-gray-400 mx-auto mb-3"}),s[22]||(s[22]=e("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Klik untuk pilih gambar",-1)),s[23]||(s[23]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"PNG, JPG, WEBP (max 2MB)",-1))])),e("div",null,[s[24]||(s[24]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 font-poppins"},[q("Judul "),e("span",{class:"text-red-500"},"*")],-1)),V(e("input",{"onUpdate:modelValue":s[9]||(s[9]=f=>t.uploadData.title=f),type:"text",required:"",class:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Masukkan judul foto"},null,512),[[X,t.uploadData.title]])]),e("div",null,[s[25]||(s[25]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 font-poppins"},"Deskripsi",-1)),V(e("textarea",{"onUpdate:modelValue":s[10]||(s[10]=f=>t.uploadData.description=f),rows:"3",class:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",placeholder:"Masukkan deskripsi (opsional)"},null,512),[[X,t.uploadData.description]])]),e("div",St,[e("button",{type:"button",onClick:s[11]||(s[11]=f=>v.$emit("close-upload")),class:"flex-1 px-4 py-2.5 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-gray-700 font-poppins"},"Batal"),e("button",{type:"submit",disabled:!t.uploadData.image||t.uploading,class:"flex-1 px-4 py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-xl font-medium font-poppins disabled:opacity-50"},C(t.uploading?"Uploading...":"Upload"),9,Ut)])],32)])])):j("",!0)]),_:1})],64))}},jt=L(Dt,[["__scopeId","data-v-135c91ec"]]),Gt={class:"space-y-6"},M="/yasmin-panel/galeri/grid",Bt={__name:"GaleriPage",setup(t){const n=g(!1),a=g(!1),i=g(!1),c=g(null),o=g(null),x=g(!1),I=g(!1),D=g(null),U=g(!1),w=g(""),S=g(null),G=g(!1),N=g(Array(9).fill(null)),T=g({}),B=g({show:!1,type:"success",text:""}),h=g({image:null,imagePreview:null,title:"",description:""}),m=g({id:null,grid_position:null,title:"",description:"",is_active:!0,image_url:""}),E=g(null),P=g(null),J=H(()=>[1,2,8].includes(o.value)?16/9:1),b=(l,d)=>{B.value={show:!0,type:l,text:d},setTimeout(()=>{B.value.show=!1},5e3)},v=async()=>{n.value=!0;try{const l=await A.get(M);N.value=l.data;const d=await A.get(`${M}/available-slots`);T.value=d.data.available_slots}catch{b("error","Gagal memuat galeri grid")}finally{n.value=!1}},s=l=>{if(!T.value[l]){b("error","Slot ini belum bisa diisi. Lengkapi baris sebelumnya terlebih dahulu.");return}o.value=l,x.value=!0},f=l=>{const d=l.target.files[0];if(!d)return;if(d.size>2*1024*1024){b("error","File terlalu besar (maksimal 2MB)"),l.target.value="";return}if(!["image/jpeg","image/png","image/jpg","image/webp"].includes(d.type)){b("error","Format file tidak didukung"),l.target.value="";return}S.value=d;const y=new FileReader;y.onload=$=>{w.value=$.target.result,U.value=!0},y.readAsDataURL(d),l.target.value=""},W=l=>{G.value&&I.value?(P.value=l,E.value=URL.createObjectURL(l)):(h.value.image=l,h.value.imagePreview=URL.createObjectURL(l)),U.value=!1,S.value=null},re=(l,d)=>{w.value=l,S.value=d},ne=async()=>{var d,y;if(!h.value.image){b("error","Pilih gambar terlebih dahulu");return}a.value=!0,c.value=o.value;const l=new FormData;l.append("image",h.value.image,"cropped.webp"),l.append("grid_position",o.value),l.append("title",h.value.title),l.append("description",h.value.description||"");try{await A.post(M,l,{headers:{"Content-Type":"multipart/form-data"}}),b("success",`Berhasil upload ke Slot ${o.value}!`),te(),await v()}catch($){b("error",((y=(d=$.response)==null?void 0:d.data)==null?void 0:y.message)||"Gagal mengupload foto")}finally{a.value=!1,c.value=null}},te=()=>{x.value=!1,o.value=null,h.value={image:null,imagePreview:null,title:"",description:""},S.value=null,w.value=""},de=l=>{m.value={id:l.id,grid_position:l.grid_position,title:l.title,description:l.description||"",is_active:l.is_active,image_url:l.image_url,all_images:l.all_images||[]},o.value=l.grid_position,I.value=!0},ue=()=>{o.value=m.value.grid_position,D.value.click()},pe=async()=>{var d;if(i.value=!0,((d=m.value.all_images)==null?void 0:d.length)>0){const y=m.value.all_images[0];z.value[y.id]&&(m.value.title=z.value[y.id].title,m.value.description=z.value[y.id].description)}const l=new FormData;l.append("title",m.value.title),l.append("description",m.value.description||""),l.append("is_active",m.value.is_active?"1":"0"),h.value.image&&l.append("image",h.value.image,"cropped.webp");try{await A.post(`${M}/${m.value.id}`,l,{headers:{"Content-Type":"multipart/form-data"}}),z.value={},b("success","Galeri berhasil diupdate!"),le(),await v()}catch{b("error","Gagal mengupdate galeri")}finally{i.value=!1}},le=()=>{I.value=!1,m.value={id:null,grid_position:null,title:"",description:"",is_active:!0,image_url:""},h.value={image:null,imagePreview:null,title:"",description:""},S.value=null,w.value="",G.value=!1,P.value=null,E.value=null},ge=async l=>{if(confirm(`Yakin ingin menghapus foto dari Slot ${l.grid_position}?`))try{await A.delete(`${M}/${l.id}`),b("success","Foto berhasil dihapus!"),await v()}catch{b("error","Gagal menghapus foto")}},ve=()=>{G.value=!0},ce=()=>{D.value.click()},me=async l=>{var d,y;if(!P.value){b("error","Pilih gambar terlebih dahulu");return}try{i.value=!0;const $=new FormData;$.append("image",P.value,"cropped.webp"),$.append("title",(l==null?void 0:l.title)||"Foto Baru"),$.append("description",(l==null?void 0:l.description)||""),await A.post(`${M}/${m.value.id}/add-image`,$,{headers:{"Content-Type":"multipart/form-data"}}),b("success","Foto berhasil ditambahkan!"),await v();const O=N.value.find(ae=>ae&&ae.id===m.value.id);O&&(m.value.all_images=O.all_images),G.value=!1,P.value=null,E.value=null}catch($){b("error",((y=(d=$.response)==null?void 0:d.data)==null?void 0:y.message)||"Gagal menambah foto")}finally{i.value=!1}},be=()=>{G.value=!1,P.value=null,E.value=null},z=g({}),fe=l=>{l!=null&&l.id&&(z.value[l.id]={title:l.title,description:l.description})},ye=async l=>{var d,y;if(confirm("Yakin ingin menghapus foto ini?"))try{await A.delete(`${M}/${m.value.id}/image`,{data:{image_id:l}}),b("success","Foto berhasil dihapus!"),await v();const $=N.value.find(O=>O&&O.id===m.value.id);$&&(m.value.all_images=$.all_images)}catch($){b("error",((y=(d=$.response)==null?void 0:d.data)==null?void 0:y.message)||"Gagal menghapus foto")}};return he(()=>{v()}),(l,d)=>(p(),u("div",Gt,[r(tt,{loading:n.value,onRefresh:v},null,8,["loading"]),r(rt,{alert:B.value,onCloseAlert:d[0]||(d[0]=y=>B.value.show=!1)},null,8,["alert"]),r(Qe,{loading:n.value,galleries:N.value,"available-slots":T.value,"uploading-slot":c.value,onUpload:s,onEdit:de,onDelete:ge},null,8,["loading","galleries","available-slots","uploading-slot"]),e("input",{ref_key:"fileInput",ref:D,type:"file",accept:"image/jpeg,image/png,image/jpg,image/webp",class:"hidden",onChange:f},null,544),r(jt,{"show-edit":I.value,"show-upload":x.value,"edit-data":m.value,"upload-data":h.value,"selected-slot":o.value,saving:i.value,uploading:a.value,"new-image-preview":E.value,"new-image-blob":P.value,onCloseEdit:le,onCloseUpload:te,onSaveEdit:pe,onSubmitUpload:ne,onReplaceImage:ue,onSelectFile:d[1]||(d[1]=y=>D.value.click()),onAddImage:ve,onDeleteImage:ye,onSelectNewImage:ce,onSaveNewImage:me,onCancelAddImage:be,onUpdateCurrentImage:fe},null,8,["show-edit","show-upload","edit-data","upload-data","selected-slot","saving","uploading","new-image-preview","new-image-blob"]),r(je,{show:U.value,"image-src":w.value,"aspect-ratio":J.value,onClose:d[2]||(d[2]=y=>U.value=!1),onCrop:W,onChangeImage:re},null,8,["show","image-src","aspect-ratio"])]))}},Mt=L(Bt,[["__scopeId","data-v-dc192987"]]);export{Mt as default};
